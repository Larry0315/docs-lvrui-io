<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"docs.lvrui.io","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. &quot;å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº&quot;, åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ&quot;.">
<meta property="og:type" content="website">
<meta property="og:title" content="Polar Snow Documentation">
<meta property="og:url" content="https://docs.lvrui.io/page/24/index.html">
<meta property="og:site_name" content="Polar Snow Documentation">
<meta property="og:description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. &quot;å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº&quot;, åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ&quot;.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="æåœ°ç‘é›ª">
<meta property="article:tag" content="Kubernetes">
<meta property="article:tag" content="k8s">
<meta property="article:tag" content="etcd">
<meta property="article:tag" content="golang">
<meta property="article:tag" content="python">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://docs.lvrui.io/page/24/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Polar Snow Documentation</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?963aa068438aaf077b5ce5d3b8d51c95";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Polar Snow Documentation</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">èŠ±æœ‰é‡å¼€æ—¥ äººæ— å†å°‘å¹´</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾<span class="badge">372</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£<span class="badge">284</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Larry0315" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/25/Python%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/25/Python%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">Pythonå‹ç¼©æ–‡ä»¶å¤„ç†æ¨¡å—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-25 00:48:22" itemprop="dateCreated datePublished" datetime="2016-06-25T00:48:22+08:00">2016-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/25/Python%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/25/Pythonå‹ç¼©æ–‡ä»¶å¤„ç†æ¨¡å—/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Pythonä¸­çš„zipfileå’Œtarfileä¸¤ä¸ªæ¨¡å—å¯ä»¥å®ç°å¯¹æ–‡ä»¶çš„å‹ç¼©å’Œè§£å‹ç¼©ã€‚å¹¶ä¸”æ”¯æŒå‘å‹ç¼©åŒ…ä¸­å‹å…¥æ–°çš„æ–‡ä»¶ï¼Œå’Œåœ¨å‹ç¼©åŒ…ä¸­æŒ‡å®šæ–‡ä»¶è¿›è¡Œè§£å‹ç¼©</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'docs.zip'</span>, <span class="string">'w'</span>)</span><br><span class="line"><span class="comment"># æ·»åŠ éœ€è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line">z.write(<span class="string">"c1.py"</span>)</span><br><span class="line">z.write(<span class="string">"c2.py"</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å·²å­˜åœ¨çš„å‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'docs.zip'</span>, <span class="string">'a'</span>)</span><br><span class="line"><span class="comment"># æ·»åŠ éœ€è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line">z.write(<span class="string">"test.conf"</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹ç¼©æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'docs.zip'</span>, <span class="string">'r'</span>)</span><br><span class="line">z.extractall()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹ç¼©æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå‹ç¼©åŒ…ä¸­çš„æ‰€æœ‰æ–‡ä»¶å</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'docs.zip'</span>, <span class="string">'r'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> z.namelist():</span><br><span class="line">    print(i)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># æŒ‡å®šæ–‡ä»¶åç§°è¿›è¡Œè§£å‹</span></span><br><span class="line">z.extract(<span class="string">"c1.py"</span>)</span><br><span class="line">z.close()</span><br></pre></td></tr></table></figure>

<p>è§£å‹ç¼©è¡¥å……ï¼š</p>
<ul>
<li><code>path</code> å¯ä»¥æŒ‡å®šè§£å‹ç¼©ä¹‹åçš„æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>pwd</code> å¯ä»¥æŒ‡å®šå»å“ªä¸ªç›®å½•ä¸‹è§£å‹ç¼©æ–‡ä»¶</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract</span><span class="params">(self, member, path=None, pwd=None)</span>:</span></span><br><span class="line">    <span class="string">"""Extract a member from the archive to the current working directory,</span></span><br><span class="line"><span class="string">       using its full name. Its file information is extracted as accurately</span></span><br><span class="line"><span class="string">       as possible. `member' may be a filename or a ZipInfo object. You can</span></span><br><span class="line"><span class="string">       specify a different directory using `path'.</span></span><br><span class="line"><span class="string">    """</span></span><br></pre></td></tr></table></figure>

<h1 id="tar-gz"><a href="#tar-gz" class="headerlink" title="tar.gz"></a>tar.gz</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">t = tarfile.open(<span class="string">'docs.zip'</span>, <span class="string">'w'</span>)</span><br><span class="line"><span class="comment"># æ·»åŠ éœ€è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line">t.add(<span class="string">"c1.py"</span>)</span><br><span class="line">t.add(<span class="string">"c2.py"</span>, arcname=<span class="string">"tc2.py"</span>)</span><br><span class="line">t.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å·²å­˜åœ¨çš„å‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶</span></span><br><span class="line">t = tarfile.open(<span class="string">'docs.zip'</span>, <span class="string">'a'</span>)</span><br><span class="line"><span class="comment"># æ·»åŠ éœ€è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line">t.add(<span class="string">"test.conf"</span>)</span><br><span class="line">t.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹ç¼©æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">t = tarfile.open(<span class="string">'docs.zip'</span>, <span class="string">'r'</span>)</span><br><span class="line">t.extractall()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹ç¼©æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># åˆ—å‡ºå‹ç¼©åŒ…ä¸­çš„æ‰€æœ‰æ–‡ä»¶å</span></span><br><span class="line">t = tarfile.open(<span class="string">'docs.zip'</span>, <span class="string">'r'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> t.getnames():</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ–‡ä»¶åç§°è¿›è¡Œè§£å‹</span></span><br><span class="line">t.extract(<span class="string">"tc2.py"</span>)</span><br><span class="line">t.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ–‡ä»¶åè·å–è¯¥æ–‡ä»¶å¯¹è±¡,æŒ‡å®šè¯¥æ–‡ä»¶å¯¹è±¡è¿›è¡Œè§£å‹ç¼©</span></span><br><span class="line">o = t.getmember(<span class="string">'tc2.py'</span>)</span><br><span class="line">t.extract(o)</span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure>

<p>è§£å‹ç¼©è¡¥å……ï¼š</p>
<ul>
<li><code>tarfile</code>è§£å‹ç¼©å•ä¸ªæ–‡ä»¶æ—¶æ”¯æŒä¸¤ç§æ–¹å¼è¿›è¡Œè§£å‹ï¼Œä¸€ç§æ˜¯æŒ‡å®šæ–‡ä»¶åï¼Œä¸€ç§æ˜¯æŒ‡å®šæ–‡ä»¶å¯¹è±¡ã€‚</li>
<li>è§£å‹æ–¹æ³•æ”¯æŒè§£å‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ä¸­</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extractall</span><span class="params">(self, path=<span class="string">"."</span>, members=None, *, numeric_owner=False)</span>:</span></span><br><span class="line">        <span class="string">"""Extract all members from the archive to the current working</span></span><br><span class="line"><span class="string">           directory and set owner, modification time and permissions on</span></span><br><span class="line"><span class="string">           directories afterwards. `path' specifies a different directory</span></span><br><span class="line"><span class="string">           to extract to. `members' is optional and must be a subset of the</span></span><br><span class="line"><span class="string">           list returned by getmembers(). If `numeric_owner` is True, only</span></span><br><span class="line"><span class="string">           the numbers for user/group names are used and not the names.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract</span><span class="params">(self, member, path=<span class="string">""</span>, set_attrs=True, *, numeric_owner=False)</span>:</span></span><br><span class="line">        <span class="string">"""Extract a member from the archive to the current working directory,</span></span><br><span class="line"><span class="string">           using its full name. Its file information is extracted as accurately</span></span><br><span class="line"><span class="string">           as possible. `member' may be a filename or a TarInfo object. You can</span></span><br><span class="line"><span class="string">           specify a different directory using `path'. File attributes (owner,</span></span><br><span class="line"><span class="string">           mtime, mode) are set unless `set_attrs' is False. If `numeric_owner`</span></span><br><span class="line"><span class="string">           is True, only the numbers for user/group names are used and not</span></span><br><span class="line"><span class="string">           the names.</span></span><br><span class="line"><span class="string">        """</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/23/Python%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97shutil/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/23/Python%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97shutil/" class="post-title-link" itemprop="url">Pythoné«˜çº§æ–‡ä»¶å¤„ç†æ¨¡å—shutil</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-23 03:14:09" itemprop="dateCreated datePublished" datetime="2016-06-23T03:14:09+08:00">2016-06-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/23/Python%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97shutil/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/23/Pythoné«˜çº§æ–‡ä»¶å¤„ç†æ¨¡å—shutil/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>shutilæ˜¯Pythonä¸­çš„é«˜çº§æ–‡ä»¶å¤„ç†æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å¯¹æ–‡ä»¶è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ“ä½œï¼Œå¦‚ä»…å¤åˆ¶æƒé™ã€å†…å®¹ã€å±ç»„ã€ç”¨æˆ·ã€çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œè€Œä¸”shutilæ¨¡å—è¿˜å¯ä»¥åšåˆ°å¯¹å‹ç¼©æ–‡ä»¶è¿›è¡Œç®€å•çš„å¤„ç†ã€‚</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="å°†æ–‡ä»¶å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­"><a href="#å°†æ–‡ä»¶å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­" class="headerlink" title="å°†æ–‡ä»¶å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­"></a>å°†æ–‡ä»¶å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­</h1><p>shutil.copyfileobj(fsrc, fdst[, length])</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.copyfileobj(open(<span class="string">'old.xml'</span>,<span class="string">'r'</span>), open(<span class="string">'new.xml'</span>, <span class="string">'w'</span>))</span><br></pre></td></tr></table></figure>


<h1 id="æ‹·è´æ–‡ä»¶"><a href="#æ‹·è´æ–‡ä»¶" class="headerlink" title="æ‹·è´æ–‡ä»¶"></a>æ‹·è´æ–‡ä»¶</h1><p>shutil.copyfile(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfile(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br></pre></td></tr></table></figure>


<h1 id="ä»…æ‹·è´æƒé™ã€‚å†…å®¹ã€ç»„ã€ç”¨æˆ·å‡ä¸å˜"><a href="#ä»…æ‹·è´æƒé™ã€‚å†…å®¹ã€ç»„ã€ç”¨æˆ·å‡ä¸å˜" class="headerlink" title="ä»…æ‹·è´æƒé™ã€‚å†…å®¹ã€ç»„ã€ç”¨æˆ·å‡ä¸å˜"></a>ä»…æ‹·è´æƒé™ã€‚å†…å®¹ã€ç»„ã€ç”¨æˆ·å‡ä¸å˜</h1><p>shutil.copymode(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copymode(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br></pre></td></tr></table></figure>


<h1 id="ä»…æ‹·è´çŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šmode-bits-atime-mtime-flags"><a href="#ä»…æ‹·è´çŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šmode-bits-atime-mtime-flags" class="headerlink" title="ä»…æ‹·è´çŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šmode bits, atime, mtime, flags"></a>ä»…æ‹·è´çŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šmode bits, atime, mtime, flags</h1><p>shutil.copystat(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copystat(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="æ‹·è´æ–‡ä»¶å’Œæƒé™"><a href="#æ‹·è´æ–‡ä»¶å’Œæƒé™" class="headerlink" title="æ‹·è´æ–‡ä»¶å’Œæƒé™"></a>æ‹·è´æ–‡ä»¶å’Œæƒé™</h1><p>shutil.copy(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.copy(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="æ‹·è´æ–‡ä»¶å’ŒçŠ¶æ€ä¿¡æ¯"><a href="#æ‹·è´æ–‡ä»¶å’ŒçŠ¶æ€ä¿¡æ¯" class="headerlink" title="æ‹·è´æ–‡ä»¶å’ŒçŠ¶æ€ä¿¡æ¯"></a>æ‹·è´æ–‡ä»¶å’ŒçŠ¶æ€ä¿¡æ¯</h1><p>shutil.copy2(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.copy2(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="é€’å½’çš„å»æ‹·è´æ–‡ä»¶å¤¹"><a href="#é€’å½’çš„å»æ‹·è´æ–‡ä»¶å¤¹" class="headerlink" title="é€’å½’çš„å»æ‹·è´æ–‡ä»¶å¤¹"></a>é€’å½’çš„å»æ‹·è´æ–‡ä»¶å¤¹</h1><p>shutil.ignore_patterns(*patterns)<br>shutil.copytree(src, dst, symlinks=False, ignore=None)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.copytree(<span class="string">'folder1'</span>, <span class="string">'folder2'</span>, ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))</span><br></pre></td></tr></table></figure>

<p>å¤åˆ¶ä¸­è½¯è¿æ¥çš„é—®é¢˜ï¼šå¦‚æœsymlinksä¸ºTrueï¼Œé‚£ä¹ˆè½¯è¿æ¥çš„æ–‡ä»¶ä¼šè¢«copyåˆ°ç›®æ ‡ç›®å½•ä¸­ï¼Œå¦‚æœsymlinksä¸ºFalseï¼Œé‚£ä¹ˆåªä¼šå°†è½¯è¿æ¥è¿›è¡Œcopyï¼Œå‡å¦‚é“¾æ¥çš„ç›®å½•ä¸å­˜åœ¨åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">shutil.copytree(<span class="string">'f1'</span>, <span class="string">'f2'</span>, symlinks=<span class="literal">True</span>, ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))</span><br></pre></td></tr></table></figure>

<h1 id="é€’å½’çš„å»åˆ é™¤æ–‡ä»¶"><a href="#é€’å½’çš„å»åˆ é™¤æ–‡ä»¶" class="headerlink" title="é€’å½’çš„å»åˆ é™¤æ–‡ä»¶"></a>é€’å½’çš„å»åˆ é™¤æ–‡ä»¶</h1><p>shutil.rmtree(path[, ignore_errors[, onerror]])</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.rmtree(<span class="string">'folder1'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="é€’å½’çš„å»ç§»åŠ¨æ–‡ä»¶-é‡å‘½åï¼Œç±»ä¼¼mvå‘½ä»¤"><a href="#é€’å½’çš„å»ç§»åŠ¨æ–‡ä»¶-é‡å‘½åï¼Œç±»ä¼¼mvå‘½ä»¤" class="headerlink" title="é€’å½’çš„å»ç§»åŠ¨æ–‡ä»¶/é‡å‘½åï¼Œç±»ä¼¼mvå‘½ä»¤"></a>é€’å½’çš„å»ç§»åŠ¨æ–‡ä»¶/é‡å‘½åï¼Œç±»ä¼¼mvå‘½ä»¤</h1><p>shutil.move(src, dst)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line">shutil.move(<span class="string">'folder1'</span>, <span class="string">'folder3'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="å‹ç¼©æ–‡ä»¶çš„å¤„ç†"><a href="#å‹ç¼©æ–‡ä»¶çš„å¤„ç†" class="headerlink" title="å‹ç¼©æ–‡ä»¶çš„å¤„ç†"></a>å‹ç¼©æ–‡ä»¶çš„å¤„ç†</h1><p>shutil.make_archive(base_name, format,â€¦)</p>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>base_nameï¼š å‹ç¼©åŒ…çš„æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥æ˜¯å‹ç¼©åŒ…çš„è·¯å¾„ã€‚åªæ˜¯æ–‡ä»¶åæ—¶ï¼Œåˆ™ä¿å­˜è‡³å½“å‰ç›®å½•ï¼Œå¦åˆ™ä¿å­˜è‡³æŒ‡å®šè·¯å¾„ï¼Œ<ul>
<li>å¦‚ï¼šdocs.tar.gz =&gt; ä¿å­˜è‡³å½“å‰è·¯å¾„,å¹¶ä»¥æ­¤ä¸ºæ–‡ä»¶å</li>
<li>å¦‚ï¼š/Users/PolarSnow/docs.tar.gz =&gt;ä¿å­˜è‡³/Users/PolarSnow/ å¹¶ä»¥docs.tar.gzçš„æ–‡ä»¶åä¿å­˜</li>
</ul>
</li>
<li>formatï¼š    å‹ç¼©åŒ…ç§ç±»ï¼Œâ€œzipâ€, â€œtarâ€, â€œbztarâ€ï¼Œâ€œgztarâ€</li>
<li>root_dirï¼š    è¦å‹ç¼©çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰</li>
<li>ownerï¼š    ç”¨æˆ·ï¼Œé»˜è®¤å½“å‰ç”¨æˆ·</li>
<li>groupï¼š    ç»„ï¼Œé»˜è®¤å½“å‰ç»„</li>
<li>loggerï¼š    ç”¨äºè®°å½•æ—¥å¿—ï¼Œé€šå¸¸æ˜¯logging.Loggerå¯¹è±¡</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°† /Users/polarsnow/Downloads/docs ä¸‹çš„æ–‡ä»¶æ‰“åŒ…æ”¾ç½®å½“å‰ç¨‹åºç›®å½•</span></span><br><span class="line"><span class="comment"># base_nameä¸éœ€è¦æŒ‡å®šæ–‡ä»¶åçš„åç¼€ï¼Œå‹ç¼©åä¼šè‡ªåŠ¨åœ¨åé¢åŠ ä¸Štar.gzçš„åç¼€</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">"docs"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/Users/wupeiqi/Downloads/docs'</span>)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#å°† /Users/polarsnow/Downloads/docs ä¸‹çš„æ–‡ä»¶æ‰“åŒ…æ”¾ç½® /Users/polarsnow/ç›®å½•ä¸‹ï¼Œå¹¶ä»¥docs.tar.gzå‘½å</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">"/Users/wupeiqi/docs"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/Users/wupeiqi/Downloads/test'</span>)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/23/Python%E4%B8%8B%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%9D%97subprocess/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/23/Python%E4%B8%8B%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%9D%97subprocess/" class="post-title-link" itemprop="url">Pythonä¸‹çš„ç³»ç»Ÿå‘½ä»¤æ¨¡å—subprocess</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-23 01:32:09" itemprop="dateCreated datePublished" datetime="2016-06-23T01:32:09+08:00">2016-06-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/23/Python%E4%B8%8B%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%9D%97subprocess/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/23/Pythonä¸‹çš„ç³»ç»Ÿå‘½ä»¤æ¨¡å—subprocess/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>åœ¨Python3ä¸­ï¼Œcommandsæ¨¡å—è¢«ç§»é™¤æ‰ï¼Œcommandsæ¨¡å—æ‰§è¡Œshellå‘½ä»¤çš„ç›¸å…³æ¨¡å—å’Œå‡½æ•°çš„åŠŸèƒ½ï¼Œåœ¨subprocessæ¨¡å—æ€»å‡å¯å®ç°ï¼Œå¹¶ä¸”æä¾›äº†æ›´åŠ ä¸°å¯Œçš„åŠŸèƒ½</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="call"><a href="#call" class="headerlink" title="call"></a>call</h1><p>æ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›çŠ¶æ€ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = subprocess.call([<span class="string">"df"</span>,<span class="string">"-h"</span>], shell=<span class="literal">False</span>)</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/disk1      <span class="number">233</span>G  <span class="number">107</span>G  <span class="number">127</span>G  <span class="number">46</span>% /</span><br><span class="line">/dev/disk2s1     <span class="number">58</span>G   <span class="number">36</span>G   <span class="number">22</span>G  <span class="number">63</span>% /Volumes/SanDisk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(ret)</span><br><span class="line"><span class="number">0</span></span><br><span class="line">------------</span><br><span class="line"><span class="comment"># ä»¥shellçš„æ¨¡å¼è¿è¡Œ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = subprocess.call(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>)</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/disk1      <span class="number">233</span>G  <span class="number">107</span>G  <span class="number">127</span>G  <span class="number">46</span>% /</span><br><span class="line">/dev/disk2s1     <span class="number">58</span>G   <span class="number">36</span>G   <span class="number">22</span>G  <span class="number">63</span>% /Volumes/SanDisk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(ret)</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<h1 id="check-call"><a href="#check-call" class="headerlink" title="check_call"></a>check_call</h1><p>æ£€æŸ¥æ‰§è¡Œå‘½ä»¤åçš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯0åˆ™è¿”å›ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = subprocess.check_call(<span class="string">"exit 1"</span>, shell=<span class="literal">True</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/subprocess.py"</span>, line <span class="number">584</span>, <span class="keyword">in</span> check_call</span><br><span class="line">    <span class="keyword">raise</span> CalledProcessError(retcode, cmd)</span><br><span class="line">subprocess.CalledProcessError: Command <span class="string">'exit 1'</span> returned non-zero exit status <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h1 id="check-output"><a href="#check-output" class="headerlink" title="check_output"></a>check_output</h1><p>æ£€æŸ¥æ‰§è¡Œå‘½ä»¤åçš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯0åˆ™è¿”å›æ‰§è¡Œç»“æœï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ret = subprocess.check_output(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(ret)</span><br><span class="line"><span class="string">b'Filesystem      Size  Used Avail Use% Mounted on\n/dev/disk1      233G  107G  127G  46% /\n/dev/disk2s1     58G   36G   22G  63% /Volumes/SanDisk\n'</span></span><br></pre></td></tr></table></figure>

<h1 id="Popen"><a href="#Popen" class="headerlink" title="Popen"></a>Popen</h1><p>ç”¨äºæ‰§è¡Œå¤æ‚çš„ç³»ç»Ÿå‘½ä»¤</p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>argsï¼šshellå‘½ä»¤ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…åºåˆ—ç±»å‹ï¼ˆå¦‚ï¼šlistï¼Œå…ƒç»„ï¼‰</li>
<li>bufsizeï¼šæŒ‡å®šç¼“å†²ã€‚0 æ— ç¼“å†²,1 è¡Œç¼“å†²,å…¶ä»– ç¼“å†²åŒºå¤§å°,è´Ÿå€¼ ç³»ç»Ÿç¼“å†²</li>
<li>stdin, stdout, stderrï¼šåˆ†åˆ«è¡¨ç¤ºç¨‹åºçš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯å¥æŸ„</li>
<li>preexec_fnï¼šåªåœ¨Unixå¹³å°ä¸‹æœ‰æ•ˆï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå¯æ‰§è¡Œå¯¹è±¡ï¼ˆcallable objectï¼‰ï¼Œå®ƒå°†åœ¨å­è¿›ç¨‹è¿è¡Œä¹‹å‰è¢«è°ƒç”¨</li>
<li>close_sfsï¼šåœ¨windowså¹³å°ä¸‹ï¼Œå¦‚æœclose_fdsè¢«è®¾ç½®ä¸ºTrueï¼Œåˆ™æ–°åˆ›å»ºçš„å­è¿›ç¨‹å°†ä¸ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯ç®¡é“ã€‚<br>æ‰€ä»¥ä¸èƒ½å°†close_fdsè®¾ç½®ä¸ºTrueåŒæ—¶é‡å®šå‘å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºä¸é”™è¯¯(stdin, stdout, stderr)ã€‚</li>
<li>shellï¼šåŒä¸Š</li>
<li>cwdï¼šç”¨äºè®¾ç½®å­è¿›ç¨‹çš„å½“å‰ç›®å½•</li>
<li>envï¼šç”¨äºæŒ‡å®šå­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ã€‚å¦‚æœenv = Noneï¼Œå­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡å°†ä»çˆ¶è¿›ç¨‹ä¸­ç»§æ‰¿ã€‚</li>
<li>universal_newlinesï¼šä¸åŒç³»ç»Ÿçš„æ¢è¡Œç¬¦ä¸åŒï¼ŒTrue -&gt; åŒæ„ä½¿ç”¨ \n</li>
<li>startupinfoä¸createionflagsåªåœ¨windowsä¸‹æœ‰æ•ˆ<br>å°†è¢«ä¼ é€’ç»™åº•å±‚çš„CreateProcess()å‡½æ•°ï¼Œç”¨äºè®¾ç½®å­è¿›ç¨‹çš„ä¸€äº›å±æ€§ï¼Œå¦‚ï¼šä¸»çª—å£çš„å¤–è§‚ï¼Œè¿›ç¨‹çš„ä¼˜å…ˆçº§ç­‰ç­‰ </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">ret1 = subprocess.Popen([<span class="string">"mkdir"</span>,<span class="string">"t1"</span>])</span><br><span class="line">ret2 = subprocess.Popen(<span class="string">"mkdir t2"</span>, shell=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h2 id="éäº¤äº’æ¨¡å¼çš„å‘½ä»¤"><a href="#éäº¤äº’æ¨¡å¼çš„å‘½ä»¤" class="headerlink" title="éäº¤äº’æ¨¡å¼çš„å‘½ä»¤"></a>éäº¤äº’æ¨¡å¼çš„å‘½ä»¤</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"polarsnow"</span>)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">polarsnow</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/disk1      <span class="number">233</span>G  <span class="number">107</span>G  <span class="number">127</span>G  <span class="number">46</span>% /</span><br><span class="line">/dev/disk2s1     <span class="number">58</span>G   <span class="number">36</span>G   <span class="number">22</span>G  <span class="number">63</span>% /Volumes/SanDisk</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ä¾‹å­ğŸŒ°çœ‹åˆ°ï¼Œçˆ¶è¿›ç¨‹åœ¨å¼€å¯å­è¿›ç¨‹ä¹‹åå¹¶æ²¡æœ‰ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œè€Œæ˜¯ç›´æ¥è¿è¡Œäº†print</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>)</span><br><span class="line">obj.wait()</span><br><span class="line">print(<span class="string">"polarsnow"</span>)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/disk1      <span class="number">233</span>G  <span class="number">107</span>G  <span class="number">127</span>G  <span class="number">46</span>% /</span><br><span class="line">/dev/disk2s1     <span class="number">58</span>G   <span class="number">36</span>G   <span class="number">22</span>G  <span class="number">63</span>% /Volumes/SanDisk</span><br><span class="line">polarsnow</span><br></pre></td></tr></table></figure>

<p>åŠ å…¥äº†waitä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œçˆ¶è¿›ç¨‹ä¼šç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸåå†æ‰§è¡Œprint</p>
<p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥åœ¨çˆ¶è¿›ç¨‹ä¸­å¯¹å­è¿›ç¨‹è¿›è¡Œå¦‚ä¸‹å…¶ä»–çš„æ“ä½œï¼š</p>
<ul>
<li>obj.poll()  æ£€æŸ¥å­è¿›ç¨‹çš„çŠ¶æ€</li>
<li>obj.kill() ç»ˆæ­¢å­è¿›ç¨‹</li>
<li>obj.sent_signal() å‘å­è¿›ç¨‹å‘é€ä¿¡å·</li>
<li>obj.terminate() ç»ˆæ­¢å­è¿›ç¨‹</li>
<li>obj.pid æŸ¥çœ‹å­è¿›ç¨‹çš„pid</li>
<li>obj.args æŸ¥çœ‹shellå‘½ä»¤</li>
</ul>
<h2 id="å­è¿›ç¨‹çš„æ–‡æœ¬æµæ§åˆ¶"><a href="#å­è¿›ç¨‹çš„æ–‡æœ¬æµæ§åˆ¶" class="headerlink" title="å­è¿›ç¨‹çš„æ–‡æœ¬æµæ§åˆ¶"></a>å­è¿›ç¨‹çš„æ–‡æœ¬æµæ§åˆ¶</h2><ul>
<li>obj.stdin æ ‡å‡†è¾“å…¥</li>
<li>obj.stdout æ ‡å‡†è¾“å‡º</li>
<li>obj.stderr æ ‡å‡†é”™è¯¯</li>
</ul>
<p>å¯ä»¥åœ¨Popenå»ºç«‹å­è¿›ç¨‹çš„æ—¶å€™æ”¹å˜å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ã€‚å¹¶å¯ä»¥åˆ©ç”¨subprocess.PIPEå°†å¤šä¸ªå­è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºè¿æ¥åœ¨ä¸€èµ·ï¼Œæ„æˆç®¡é“</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE)</span><br><span class="line">print(obj.stdout.read())</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨äº†subprocessæä¾›çš„ç®¡é“ï¼Œå­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤åçš„è¾“å‡ºä¸ä¼šå†é»˜è®¤è¾“å‡ºåˆ°å±å¹•ä¸Šäº†ï¼Œè€Œæ˜¯æ”¾åˆ°äº†ç®¡é“é‡Œï¼Œç­‰å¾…ç”¨æˆ·æå–ç®¡é“ä¸­çš„æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"df -h"</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE)</span><br><span class="line">print(obj.communicate())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">(<span class="string">b'Filesystem      Size  Used Avail Use% Mounted on\n/dev/disk1      233G  107G  127G  46% /\n/dev/disk2s1     58G   36G   22G  63% /Volumes/SanDisk\n'</span>, <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>communicate()ä¼šè¿”å›æ‰§è¡Œå‘½ä»¤çš„ç»“æœå’Œæ ‡å‡†é”™è¯¯ï¼Œä½†æ˜¯ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘åªæ˜¯å°†å­è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºæ”¾åˆ°çš„subprocessçš„ç®¡é“ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹æ ‡å‡†é”™è¯¯åº”ç”¨subprocessçš„ç®¡é“ï¼Œæ‰€ä»¥ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œè¿™é‡Œçš„è¿”å›å€¼è¿”å›çš„æ ‡å‡†é”™è¯¯æ°¸è¿œæ˜¯Noneã€‚ä¸‹é¢æ¥éªŒè¯ä¸€ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"df -y"</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE)</span><br><span class="line">print(obj.communicate())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">df: invalid option -- <span class="string">'y'</span></span><br><span class="line">Try <span class="string">'df --help'</span> <span class="keyword">for</span> more information.</span><br><span class="line">(<span class="string">b''</span>, <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>æœç„¶ï¼ŒæŠ¥é”™é»˜è®¤æ‰“åœ¨äº†å±å¹•ä¸Šï¼Œè€Œcommunicateçš„è¿”å›å€¼ä¸­çš„æ ‡å‡†é”™è¯¯ä¾ç„¶æ˜¯None</p>
<p><strong>å®ç°Linuxä¸­ | ç®¡é“çš„æ•ˆæœ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj1 = subprocess.Popen(<span class="string">"cat /etc/passwd"</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)</span><br><span class="line">obj2 = subprocess.Popen(<span class="string">"grep root"</span>, shell=<span class="literal">True</span>, stdin=obj1.stdout, stdout=subprocess.PIPE, stderr=subprocess.PIPE)</span><br><span class="line">out = obj2.communicate()</span><br><span class="line">print(out)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">(<span class="string">b'root:*:0:0:System Administrator:/var/root:/bin/sh\ndaemon:*:1:1:System Services:/var/root:/usr/bin/false\n_cvmsroot:*:212:212:CVMS Root:/var/empty:/usr/bin/false\n'</span>, <span class="string">b''</span>)</span><br></pre></td></tr></table></figure>

<p>ç¬¬3è¡Œï¼šåˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹å»æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶å°†æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œé”™è¯¯æ”¾åˆ°äº†subprocessæä¾›çš„ç®¡é“ä¸­ã€‚</p>
<p>ç¬¬4è¡Œï¼šåˆ›å»ºäº†å¦ä¸€ä¸ªå­è¿›ç¨‹å»æ‰§è¡Œå‘½ä»¤ï¼Œå‘½ä»¤çš„æ ‡å‡†è¾“å…¥æ˜¯ä¸Šä¸€æ¡å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œæ‰€ä»¥æŠŠobj1ä¸­çš„æ ‡å‡†è¾“å‡ºä»subprocessçš„ç®¡é“ä¸­å–å‡ºå½“åšæ ‡å‡†è¾“å…¥ä¼ é€’ç»™ç¬¬äºŒä¸ªå­è¿›ç¨‹</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œåœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä¸åŠ waitçš„è¯ï¼Œçˆ¶è¿›ç¨‹ä¸ç®¡å­è¿›ç¨‹æœ‰æ²¡æœ‰æ‰§è¡Œå®Œéƒ½ä¼šå¾€ä¸‹æ‰§è¡Œï¼Œé‚£ä¹ˆå‡å¦‚ç¬¬ä¸€æ¡å‘½ä»¤æ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œçˆ¶è¿›ç¨‹å¦‚æœç»§ç»­å‘ä¸‹èµ°ï¼Œæ‰§è¡Œç¬¬äºŒæ¡å‘½ä»¤æ—¶ï¼Œè¿˜æ²¡æœ‰æ‹¿åˆ°ç¬¬ä¸€æ¡çš„æ ‡å‡†è¾“å‡ºï¼Œä¼šä¸ä¼šæŠ¥é”™å‘¢ï¼Ÿé¦–å…ˆï¼Œè¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼ä¸‹é¢è¯¦ç»†åˆ†æä¸€ä¸‹</p>
<ul>
<li>ç¨‹åºä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œä½†æ˜¯ä¼šåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æƒ…å†µæ˜¯ç¬¬äºŒæ¡å‘½ä»¤æ˜¯é˜»å¡çš„å‘½ä»¤ï¼Œç¬¬äºŒç§æƒ…å†µæ˜¯éé˜»å¡çš„å‘½ä»¤ã€‚<ul>
<li>å‡å¦‚ç¬¬äºŒæ¡æ˜¯é˜»å¡çš„å‘½ä»¤ï¼Œè¿›ç¨‹ä¼šä¸€ç›´å¡ä½ï¼Œç­‰å¾…æ¥æ”¶è¾“å…¥ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºä¼šä¸€ç›´ç­‰ä¸‹å»ï¼Œç­‰åˆ°ç¬¬ä¸€æ¡å‘½ä»¤æ‰§è¡Œç»“æŸï¼ŒæŠŠæ ‡å‡†è¾“å‡ºæ”¾åˆ°ç®¡é“ä¸ºæ­¢ã€‚</li>
<li>å‡å¦‚ç¬¬äºŒæ¡å‘½ä»¤æ˜¯éé˜»å¡çš„å‘½ä»¤ï¼Œçˆ¶è¿›ç¨‹ä¼šç«‹å³å‘ä¸‹æ‰§è¡Œï¼Œè™½ç„¶ç¬¬ä¸€æ¡å‘½ä»¤è¿˜æ²¡æœ‰æŠŠæ ‡å‡†è¾“å‡ºæ”¾åˆ°ç®¡é“ä¸­ï¼Œç¬¬äºŒæ¡å‘½ä»¤ä¼šè®¤ä¸ºä½ è¦ç»™æˆ‘ä¼ çš„å°±æ˜¯ç©ºï¼Œæ‰€ä»¥ç¬¬äºŒæ¡å‘½ä»¤ä¼šè¢«è¿…é€Ÿæ‰§è¡Œå®Œæ¯•ï¼Œè€Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè°ƒç”¨äº†ç¬¬äºŒæ¡å‘½ä»¤å¯¹è±¡çš„communicateæ–¹æ³•ï¼Œåªä¼šç­‰å¾…ç¬¬äºŒæ¡å‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œä¸€æ—¦ç¬¬äºŒæ¡å‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œä¸ç®¡ç¬¬ä¸€æ¡æœ‰æ²¡æœ‰æ‰§è¡Œå®Œéƒ½ä¼šç«‹å³é€€å‡º</li>
</ul>
</li>
</ul>
<p>subprocess.PIPEå®é™…ä¸Šä¸ºæ–‡æœ¬æµæä¾›ä¸€ä¸ªç¼“å­˜åŒºã€‚child1çš„stdoutå°†æ–‡æœ¬è¾“å‡ºåˆ°ç¼“å­˜åŒºï¼Œéšåchild2çš„stdinä»è¯¥PIPEä¸­å°†æ–‡æœ¬è¯»å–èµ°ã€‚child2çš„è¾“å‡ºæ–‡æœ¬ä¹Ÿè¢«å­˜æ”¾åœ¨PIPEä¸­ï¼Œç›´åˆ°communicate()æ–¹æ³•ä»PIPEä¸­è¯»å–å‡ºPIPEä¸­çš„æ–‡æœ¬ã€‚<br>æ³¨æ„ï¼šcommunicate()æ˜¯Popenå¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡çˆ¶è¿›ç¨‹ï¼Œç›´åˆ°å­è¿›ç¨‹å®Œæˆ</p>
<h2 id="å®ç°ç±»ä¼¼pexpectçš„äº¤äº’å¼å‘½ä»¤"><a href="#å®ç°ç±»ä¼¼pexpectçš„äº¤äº’å¼å‘½ä»¤" class="headerlink" title="å®ç°ç±»ä¼¼pexpectçš„äº¤äº’å¼å‘½ä»¤"></a>å®ç°ç±»ä¼¼pexpectçš„äº¤äº’å¼å‘½ä»¤</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"passwd ps"</span>, shell=<span class="literal">True</span>, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="literal">True</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"123\n"</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"123\n"</span>)</span><br><span class="line">obj.stdin.close()</span><br><span class="line"></span><br><span class="line">cmd_out = obj.stdout.read()</span><br><span class="line">obj.stdout.close()</span><br><span class="line">cmd_error = obj.stderr.read()</span><br><span class="line">obj.stderr.close()</span><br><span class="line"></span><br><span class="line">print(cmd_out)</span><br><span class="line">print(cmd_error)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">Changing password <span class="keyword">for</span> user ps.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">New password: BAD PASSWORD: it <span class="keyword">is</span> WAY too short</span><br><span class="line">BAD PASSWORD: <span class="keyword">is</span> too simple</span><br><span class="line">Retype new password:</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"passwd ps"</span>, shell=<span class="literal">True</span>, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="literal">True</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"123\n"</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"123\n"</span>)</span><br><span class="line"></span><br><span class="line">cmd_out, cmd_error = obj.communicate()</span><br><span class="line">print(cmd_out)</span><br><span class="line">print(cmd_error)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">Changing password <span class="keyword">for</span> user ps.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">New password: BAD PASSWORD: it <span class="keyword">is</span> WAY too short</span><br><span class="line">BAD PASSWORD: <span class="keyword">is</span> too simple</span><br><span class="line">Retype new password:</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(<span class="string">"passwd ps"</span>, shell=<span class="literal">True</span>, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="literal">True</span>)</span><br><span class="line">cmd_out, cmd_error = obj.communicate(<span class="string">'123\n123\n'</span>)</span><br><span class="line">print(cmd_out)</span><br><span class="line">print(cmd_error)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">Changing password <span class="keyword">for</span> user ps.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">New password: BAD PASSWORD: it <span class="keyword">is</span> WAY too short</span><br><span class="line">BAD PASSWORD: <span class="keyword">is</span> too simple</span><br><span class="line">Retype new password:</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/22/lvm%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A9%E5%AE%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/22/lvm%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A9%E5%AE%B9/" class="post-title-link" itemprop="url">lvmçš„åˆ›å»ºå’Œæ‰©å®¹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-22 15:38:38" itemprop="dateCreated datePublished" datetime="2016-06-22T15:38:38+08:00">2016-06-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/22/lvm%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A9%E5%AE%B9/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/22/lvmçš„åˆ›å»ºå’Œæ‰©å®¹/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ›å»ºLVM"><a href="#åˆ›å»ºLVM" class="headerlink" title="åˆ›å»ºLVM"></a>åˆ›å»ºLVM</h1><p>æŸ¥çœ‹ç£ç›˜ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt; fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0x000cd8ec</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048    41943039    20970496   83  Linux</span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 536.9 GB, 536870912000 bytes, 1048576000 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br></pre></td></tr></table></figure>

<p>å¯¹æ–°ç£ç›˜åˆ†åŒº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&gt; fdisk /dev/sdc </span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0xe80f8142.</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): 1</span><br><span class="line">First sector (2048-1048575999, default 2048): </span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-1048575999, default 1048575999): </span><br><span class="line">Using default value 1048575999</span><br><span class="line">Partition 1 of <span class="built_in">type</span> Linux and of size 500 GiB is <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): t</span><br><span class="line">Selected partition 1</span><br><span class="line">Hex code (<span class="built_in">type</span> L to list all codes): 8e</span><br><span class="line">Changed <span class="built_in">type</span> of partition <span class="string">'Linux'</span> to <span class="string">'Linux LVM'</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°åˆ†åŒºè¡¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; partprobe</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºPV</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; pvcreate /dev/sdc1 </span><br><span class="line">  Physical volume <span class="string">"/dev/sdc1"</span> successfully created</span><br><span class="line">&gt; pvdisplay </span><br><span class="line">  <span class="string">"/dev/sdc1"</span> is a new physical volume of <span class="string">"500.00 GiB"</span></span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdc1</span><br><span class="line">  VG Name               </span><br><span class="line">  PV Size               500.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0   </span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               tBxBUK-gOTa-bdtK-1kbZ-01KQ-ASwQ-fuIwLi</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºVG</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&gt; vgcreate VolGroup00 /dev/sdc1 </span><br><span class="line">  Volume group <span class="string">"VolGroup00"</span> successfully created</span><br><span class="line">&gt; vgdisplay </span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               VolGroup00</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  1</span><br><span class="line">  VG Access             <span class="built_in">read</span>/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                0</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               500.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              127999</span><br><span class="line">  Alloc PE / Size       0 / 0   </span><br><span class="line">  Free  PE / Size       127999 / 500.00 GiB</span><br><span class="line">  VG UUID               xjcgUh-oZ1N-Fytd-qGCa-9otf-YV4S-Jpjc7W</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºLV</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; lvcreate -l 127999 -n lvData VolGroup00</span><br><span class="line">  Logical volume <span class="string">"lvData"</span> created.</span><br><span class="line">&gt; lvdisplay </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/VolGroup00/lvData</span><br><span class="line">  LV Name                lvData</span><br><span class="line">  VG Name                VolGroup00</span><br><span class="line">  LV UUID                pVPwru-Eu7W-3lOp-JUKc-qQYF-c3DM-vQ39g1</span><br><span class="line">  LV Write Access        <span class="built_in">read</span>/write</span><br><span class="line">  LV Creation host, time 3-9, 2016-06-22 15:47:18 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line">  <span class="comment"># open                 0</span></span><br><span class="line">  LV Size                500.00 GiB</span><br><span class="line">  Current LE             127999</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently <span class="built_in">set</span> to     256</span><br><span class="line">  Block device           253:0</span><br></pre></td></tr></table></figure>

<p><code>lvcreate -l æŒ‡å®šPEæ•°é‡åˆ›å»ºï¼ˆç²¾ç¡®ï¼‰</code></p>
<p><code>lvcreate -L 500G æŒ‰å•ä½å¤§å°åˆ›å»ºï¼ˆå¯èƒ½ä¼šæœ‰å‰©ä½™PEï¼‰</code></p>
<p>æ ¼å¼åŒ–ç£ç›˜</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt; mkfs.ext4 /dev/VolGroup00/lvData </span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Discarding device blocks: <span class="keyword">done</span>                            </span><br><span class="line">Filesystem label=</span><br><span class="line">OS <span class="built_in">type</span>: Linux</span><br><span class="line">Block size=4096 (<span class="built_in">log</span>=2)</span><br><span class="line">Fragment size=4096 (<span class="built_in">log</span>=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">32768000 inodes, 131070976 blocks</span><br><span class="line">6553548 blocks (5.00%) reserved <span class="keyword">for</span> the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=2279604224</span><br><span class="line">4000 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">        4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">        102400000</span><br><span class="line"></span><br><span class="line">Allocating group tables: <span class="keyword">done</span>                            </span><br><span class="line">Writing inode tables: <span class="keyword">done</span>                            </span><br><span class="line">Creating journal (32768 blocks): <span class="keyword">done</span></span><br><span class="line">Writing superblocks and filesystem accounting information: <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>æŒ‚è½½ä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; mount /dev/VolGroup00/lvData /apps/</span><br><span class="line">&gt; df -h</span><br><span class="line">Filesystem                     Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda1                       20G  2.8G   16G  15% /</span><br><span class="line">devtmpfs                       912M     0  912M   0% /dev</span><br><span class="line">tmpfs                          920M     0  920M   0% /dev/shm</span><br><span class="line">tmpfs                          920M  8.4M  912M   1% /run</span><br><span class="line">tmpfs                          920M     0  920M   0% /sys/fs/cgroup</span><br><span class="line">tmpfs                          184M     0  184M   0% /run/user/0</span><br><span class="line">tmpfs                          184M     0  184M   0% /run/user/1000</span><br><span class="line">/dev/mapper/VolGroup00-lvData  493G   73M  467G   1% /apps</span><br></pre></td></tr></table></figure>

<h1 id="LVMæ‰©å®¹"><a href="#LVMæ‰©å®¹" class="headerlink" title="LVMæ‰©å®¹"></a>LVMæ‰©å®¹</h1><ol>
<li>åˆ†åŒº <code>fdisk /dev/sdd</code></li>
<li>åˆ›å»ºPV <code>pvcreate /dev/sdd1 &amp;&amp; partprob</code></li>
<li>æ‰©å±•VG <code>vgextend VolGroup00 /dev/sdd1</code></li>
<li>æ‰©å±•LV <code>lvextend -L +59G /dev/VolGroup00/lvData</code></li>
<li>æ£€æŸ¥LV <code>e2fsck -f /dev/VolGroup00/lvData</code></li>
<li>é‡æ–°å®šä¹‰åˆ†åŒºå¤§å° <code>resize2fs /dev/VolGroup00/lvData</code></li>
<li>æ£€æŸ¥å®¹é‡ <code>df -h</code></li>
</ol>
<p>æ³¨æ„ï¼š å¦‚æœæ˜¯xfsæ–‡ä»¶ç³»ç»Ÿï¼Œ<code>resize2fs</code>å‘½ä»¤è¦æ›¿æ¢æˆ<code>xfs_growfs</code></p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/22/python%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/22/python%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">pythonå¤„ç†XMLæ–‡ä»¶</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-22 01:39:55" itemprop="dateCreated datePublished" datetime="2016-06-22T01:39:55+08:00">2016-06-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/22/python%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/22/pythonå¤„ç†XMLæ–‡ä»¶/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è§£æXML"><a href="#è§£æXML" class="headerlink" title="è§£æXML"></a>è§£æXML</h1><h2 id="åˆ©ç”¨ElementTree-XMLå°†å­—ç¬¦ä¸²è§£ææˆxmlå¯¹è±¡"><a href="#åˆ©ç”¨ElementTree-XMLå°†å­—ç¬¦ä¸²è§£ææˆxmlå¯¹è±¡" class="headerlink" title="åˆ©ç”¨ElementTree.XMLå°†å­—ç¬¦ä¸²è§£ææˆxmlå¯¹è±¡"></a>åˆ©ç”¨ElementTree.XMLå°†å­—ç¬¦ä¸²è§£ææˆxmlå¯¹è±¡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–XMLå†…å®¹</span></span><br><span class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()</span><br><span class="line">print(str_xml, type(str_xml))</span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è§£ææˆxmlç‰¹æ®Šå¯¹è±¡ï¼Œrootä»£æŒ‡xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.XML(str_xml)</span><br><span class="line">print(root, type(root))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">&lt;data&gt;</span><br><span class="line">    &lt;country name=<span class="string">"Liechtenstein"</span>&gt;</span><br><span class="line">        &lt;rank updated="yes"&gt;2&lt;/rank&gt;</span><br><span class="line">        &lt;year&gt;2023&lt;/year&gt;</span><br><span class="line">        &lt;gdppc&gt;141100&lt;/gdppc&gt;</span><br><span class="line">        &lt;neighbor direction=<span class="string">"E"</span> name=<span class="string">"Austria"</span> /&gt;</span><br><span class="line">        &lt;neighbor direction=<span class="string">"W"</span> name=<span class="string">"Switzerland"</span> /&gt;</span><br><span class="line">    &lt;/country&gt;</span><br><span class="line">    &lt;country name=<span class="string">"Singapore"</span>&gt;</span><br><span class="line">        &lt;rank updated="yes"&gt;5&lt;/rank&gt;</span><br><span class="line">        &lt;year&gt;2026&lt;/year&gt;</span><br><span class="line">        &lt;gdppc&gt;59900&lt;/gdppc&gt;</span><br><span class="line">        &lt;neighbor direction=<span class="string">"N"</span> name=<span class="string">"Malaysia"</span> /&gt;</span><br><span class="line">    &lt;/country&gt;</span><br><span class="line">    &lt;country name=<span class="string">"Panama"</span>&gt;</span><br><span class="line">        &lt;rank updated="yes"&gt;69&lt;/rank&gt;</span><br><span class="line">        &lt;year&gt;2026&lt;/year&gt;</span><br><span class="line">        &lt;gdppc&gt;13600&lt;/gdppc&gt;</span><br><span class="line">        &lt;neighbor direction=<span class="string">"W"</span> name=<span class="string">"Costa Rica"</span> /&gt;</span><br><span class="line">        &lt;neighbor direction=<span class="string">"E"</span> name=<span class="string">"Colombia"</span> /&gt;</span><br><span class="line">    &lt;/country&gt;</span><br><span class="line">&lt;/data&gt; &lt;class 'str'&gt;</span><br><span class="line">&lt;Element <span class="string">'data'</span> at <span class="number">0x101383cc8</span>&gt; &lt;<span class="class"><span class="keyword">class</span> '<span class="title">xml</span>.<span class="title">etree</span>.<span class="title">ElementTree</span>.<span class="title">Element</span>'&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>root</code>å˜é‡è·å–åˆ°äº†xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¸”æ•°æ®ç±»å‹ä¸º<code>xml.etree.ElementTree.Element</code></p>
<h2 id="åˆ©ç”¨ElementTree-parseå°†æ–‡ä»¶è§£ææˆxmlå¯¹è±¡"><a href="#åˆ©ç”¨ElementTree-parseå°†æ–‡ä»¶è§£ææˆxmlå¯¹è±¡" class="headerlink" title="åˆ©ç”¨ElementTree.parseå°†æ–‡ä»¶è§£ææˆxmlå¯¹è±¡"></a>åˆ©ç”¨ElementTree.parseå°†æ–‡ä»¶è§£ææˆxmlå¯¹è±¡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥è§£æxmlæ–‡ä»¶</span></span><br><span class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</span><br><span class="line">print(tree, type(tree)</span><br><span class="line"><span class="comment"># è·å–xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = tree.getroot()</span><br><span class="line">print(root, type(root))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">&lt;xml.etree.ElementTree.ElementTree object at <span class="number">0x101178780</span>&gt; &lt;<span class="class"><span class="keyword">class</span> '<span class="title">xml</span>.<span class="title">etree</span>.<span class="title">ElementTree</span>.<span class="title">ElementTree</span>'&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">Element</span> '<span class="title">data</span>' <span class="title">at</span> 0<span class="title">x101283cc8</span>&gt; &lt;<span class="title">class</span> '<span class="title">xml</span>.<span class="title">etree</span>.<span class="title">ElementTree</span>.<span class="title">Element</span>'&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸¤ç§è§£ææ–¹å¼çš„åŒºåˆ«"><a href="#ä¸¤ç§è§£ææ–¹å¼çš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§è§£ææ–¹å¼çš„åŒºåˆ«"></a>ä¸¤ç§è§£ææ–¹å¼çš„åŒºåˆ«</h2><p>è¯»å–å­—ç¬¦ä¸²å’Œè¯»å–æ–‡ä»¶çš„æ–¹å¼çš„åŒºåˆ«ï¼š</p>
<ul>
<li><p>è¯»å–å­—ç¬¦ä¸²çš„æ–¹å¼æ²¡æœ‰åˆ›å»ºtreeå¯¹è±¡</p>
</li>
<li><p>è¯»å–æ–‡ä»¶çš„æ–¹å¼è‡ªåŠ¨åˆ›å»ºäº†treeå¯¹è±¡</p>
</li>
</ul>
<p>è€Œå¦‚æœéœ€è¦å°†åœ¨å†…å­˜ä¿®æ”¹è¿‡çš„elementå¯¹è±¡ä¿å­˜æˆæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å¿…é¡»éœ€è¦ç”¨treeå¯¹è±¡çš„writeæ–¹æ³•æ¥å†™ã€‚</p>
<p>å¦‚æœç›´æ¥è¯»å–äº†å­—ç¬¦ä¸²ï¼Œé»˜è®¤æ²¡æœ‰åˆ›å»ºtreeå¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨éœ€è¦å†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶æ—¶ï¼Œå°±å¿…é¡»å…ˆåˆ›å»ºtreeå¯¹è±¡å†è¿›è¡Œå†™å…¥</p>
<h1 id="æ“ä½œXML"><a href="#æ“ä½œXML" class="headerlink" title="æ“ä½œXML"></a>æ“ä½œXML</h1><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªelementå¯¹è±¡ï¼Œæ¯ä¸€ä¸ªelementå¯¹è±¡éƒ½æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Element</span>:</span></span><br><span class="line">    <span class="string">"""An XML element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This class is the reference implementation of the Element interface.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    An element's length is its number of subelements.  That means if you</span></span><br><span class="line"><span class="string">    want to check if an element is truly empty, you should check BOTH</span></span><br><span class="line"><span class="string">    its length AND its text attribute.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    The element tag, attribute names, and attribute values can be either</span></span><br><span class="line"><span class="string">    bytes or strings.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    *tag* is the element name.  *attrib* is an optional dictionary containing</span></span><br><span class="line"><span class="string">    element attributes. *extra* are additional element attributes given as</span></span><br><span class="line"><span class="string">    keyword arguments.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Example form:</span></span><br><span class="line"><span class="string">        &lt;tag attrib&gt;text&lt;child/&gt;...&lt;/tag&gt;tail</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å</span><br><span class="line">    tag = <span class="literal">None</span></span><br><span class="line">    <span class="string">"""The element's name."""</span></span><br><span class="line"></span><br><span class="line">    å½“å‰èŠ‚ç‚¹çš„å±æ€§</span><br><span class="line"></span><br><span class="line">    attrib = <span class="literal">None</span></span><br><span class="line">    <span class="string">"""Dictionary of the element's attributes."""</span></span><br><span class="line"></span><br><span class="line">    å½“å‰èŠ‚ç‚¹çš„å†…å®¹</span><br><span class="line">    text = <span class="literal">None</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Text before first subelement. This is either a string or the value None.</span></span><br><span class="line"><span class="string">    Note that if there is no text, this attribute may be either</span></span><br><span class="line"><span class="string">    None or the empty string, depending on the parser.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    tail = <span class="literal">None</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Text after this element's end tag, but before the next sibling element's</span></span><br><span class="line"><span class="string">    start tag.  This is either a string or the value None.  Note that if there</span></span><br><span class="line"><span class="string">    was no text, this attribute may be either None or an empty string,</span></span><br><span class="line"><span class="string">    depending on the parser.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, tag, attrib=&#123;&#125;, **extra)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(attrib, dict):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"attrib must be dict, not %s"</span> % (</span><br><span class="line">                attrib.__class__.__name__,))</span><br><span class="line">        attrib = attrib.copy()</span><br><span class="line">        attrib.update(extra)</span><br><span class="line">        self.tag = tag</span><br><span class="line">        self.attrib = attrib</span><br><span class="line">        self._children = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;%s %r at %#x&gt;"</span> % (self.__class__.__name__, self.tag, id(self))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeelement</span><span class="params">(self, tag, attrib)</span>:</span></span><br><span class="line">        åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Create a new element with the same type.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *tag* is a string containing the element name.</span></span><br><span class="line"><span class="string">        *attrib* is a dictionary containing the element attributes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Do not call this method, use the SubElement factory function instead.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(tag, attrib)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copy</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return copy of current element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This creates a shallow copy. Subelements will be shared with the</span></span><br><span class="line"><span class="string">        original tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        elem = self.makeelement(self.tag, self.attrib)</span><br><span class="line">        elem.text = self.text</span><br><span class="line">        elem.tail = self.tail</span><br><span class="line">        elem[:] = self</span><br><span class="line">        <span class="keyword">return</span> elem</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self._children)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></span><br><span class="line">        warnings.warn(</span><br><span class="line">            <span class="string">"The behavior of this method will change in future versions.  "</span></span><br><span class="line">            <span class="string">"Use specific 'len(elem)' or 'elem is not None' test instead."</span>,</span><br><span class="line">            FutureWarning, stacklevel=<span class="number">2</span></span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> len(self._children) != <span class="number">0</span> <span class="comment"># emulate old behaviour, for now</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._children[index]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, index, element)</span>:</span></span><br><span class="line">        <span class="comment"># if isinstance(index, slice):</span></span><br><span class="line">        <span class="comment">#     for elt in element:</span></span><br><span class="line">        <span class="comment">#         assert iselement(elt)</span></span><br><span class="line">        <span class="comment"># else:</span></span><br><span class="line">        <span class="comment">#     assert iselement(element)</span></span><br><span class="line">        self._children[index] = element</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self._children[index]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span><span class="params">(self, subelement)</span>:</span></span><br><span class="line">        ä¸ºå½“å‰èŠ‚ç‚¹è¿½åŠ ä¸€ä¸ªå­èŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Add *subelement* to the end of this element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The new element will appear in document order after the last existing</span></span><br><span class="line"><span class="string">        subelement (or directly after the text, if it's the first subelement),</span></span><br><span class="line"><span class="string">        but before the end tag for this element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._assert_is_element(subelement)</span><br><span class="line">        self._children.append(subelement)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">extend</span><span class="params">(self, elements)</span>:</span></span><br><span class="line">        ä¸ºå½“å‰èŠ‚ç‚¹æ‰©å±• n ä¸ªå­èŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Append subelements from a sequence.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *elements* is a sequence with zero or more elements.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> elements:</span><br><span class="line">            self._assert_is_element(element)</span><br><span class="line">        self._children.extend(elements)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, index, subelement)</span>:</span></span><br><span class="line">        åœ¨å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸­æ’å…¥æŸä¸ªèŠ‚ç‚¹ï¼Œå³ï¼šä¸ºå½“å‰èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Œç„¶åæ’å…¥æŒ‡å®šä½ç½®</span><br><span class="line">        <span class="string">"""Insert *subelement* at position *index*."""</span></span><br><span class="line">        self._assert_is_element(subelement)</span><br><span class="line">        self._children.insert(index, subelement)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_assert_is_element</span><span class="params">(self, e)</span>:</span></span><br><span class="line">        <span class="comment"># Need to refer to the actual Python implementation, not the</span></span><br><span class="line">        <span class="comment"># shadowing C implementation.</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(e, _Element_Py):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'expected an Element, not %s'</span> % type(e).__name__)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self, subelement)</span>:</span></span><br><span class="line">        åœ¨å½“å‰èŠ‚ç‚¹åœ¨å­èŠ‚ç‚¹ä¸­åˆ é™¤æŸä¸ªèŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Remove matching subelement.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Unlike the find methods, this method compares elements based on</span></span><br><span class="line"><span class="string">        identity, NOT ON tag value or contents.  To remove subelements by</span></span><br><span class="line"><span class="string">        other means, the easiest way is to use a list comprehension to</span></span><br><span class="line"><span class="string">        select what elements to keep, and then use slice assignment to update</span></span><br><span class="line"><span class="string">        the parent element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        ValueError is raised if a matching element could not be found.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># assert iselement(element)</span></span><br><span class="line">        self._children.remove(subelement)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getchildren</span><span class="params">(self)</span>:</span></span><br><span class="line">        è·å–æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼ˆåºŸå¼ƒï¼‰</span><br><span class="line">        <span class="string">"""(Deprecated) Return all subelements.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Elements are returned in document order.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        warnings.warn(</span><br><span class="line">            <span class="string">"This method will be removed in future versions.  "</span></span><br><span class="line">            <span class="string">"Use 'list(elem)' or iteration over elem instead."</span>,</span><br><span class="line">            DeprecationWarning, stacklevel=<span class="number">2</span></span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> self._children</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, path, namespaces=None)</span>:</span></span><br><span class="line">        è·å–ç¬¬ä¸€ä¸ªå¯»æ‰¾åˆ°çš„å­èŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Find first matching element by tag name or path.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *path* is a string having either an element tag or an XPath,</span></span><br><span class="line"><span class="string">        *namespaces* is an optional mapping from namespace prefix to full name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Return the first matching element, or None if no element was found.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> ElementPath.find(self, path, namespaces)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findtext</span><span class="params">(self, path, default=None, namespaces=None)</span>:</span></span><br><span class="line">        è·å–ç¬¬ä¸€ä¸ªå¯»æ‰¾åˆ°çš„å­èŠ‚ç‚¹çš„å†…å®¹</span><br><span class="line">        <span class="string">"""Find text for first matching element by tag name or path.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *path* is a string having either an element tag or an XPath,</span></span><br><span class="line"><span class="string">        *default* is the value to return if the element was not found,</span></span><br><span class="line"><span class="string">        *namespaces* is an optional mapping from namespace prefix to full name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Return text content of first matching element, or default value if</span></span><br><span class="line"><span class="string">        none was found.  Note that if an element is found having no text</span></span><br><span class="line"><span class="string">        content, the empty string is returned.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> ElementPath.findtext(self, path, default, namespaces)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findall</span><span class="params">(self, path, namespaces=None)</span>:</span></span><br><span class="line">        è·å–æ‰€æœ‰çš„å­èŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Find all matching subelements by tag name or path.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *path* is a string having either an element tag or an XPath,</span></span><br><span class="line"><span class="string">        *namespaces* is an optional mapping from namespace prefix to full name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns list containing all matching elements in document order.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> ElementPath.findall(self, path, namespaces)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">iterfind</span><span class="params">(self, path, namespaces=None)</span>:</span></span><br><span class="line">        è·å–æ‰€æœ‰æŒ‡å®šçš„èŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼ˆå¯ä»¥è¢«<span class="keyword">for</span>å¾ªç¯ï¼‰</span><br><span class="line">        <span class="string">"""Find all matching subelements by tag name or path.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *path* is a string having either an element tag or an XPath,</span></span><br><span class="line"><span class="string">        *namespaces* is an optional mapping from namespace prefix to full name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Return an iterable yielding all matching elements in document order.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> ElementPath.iterfind(self, path, namespaces)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clear</span><span class="params">(self)</span>:</span></span><br><span class="line">        æ¸…ç©ºèŠ‚ç‚¹</span><br><span class="line">        <span class="string">"""Reset element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This function removes all subelements, clears all attributes, and sets</span></span><br><span class="line"><span class="string">        the text and tail attributes to None.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.attrib.clear()</span><br><span class="line">        self._children = []</span><br><span class="line">        self.text = self.tail = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, key, default=None)</span>:</span></span><br><span class="line">        è·å–å½“å‰èŠ‚ç‚¹çš„å±æ€§å€¼</span><br><span class="line">        <span class="string">"""Get element attribute.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Equivalent to attrib.get, but some implementations may handle this a</span></span><br><span class="line"><span class="string">        bit more efficiently.  *key* is what attribute to look for, and</span></span><br><span class="line"><span class="string">        *default* is what to return if the attribute was not found.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns a string containing the attribute value, or the default if</span></span><br><span class="line"><span class="string">        attribute was not found.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.attrib.get(key, default)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        ä¸ºå½“å‰èŠ‚ç‚¹è®¾ç½®å±æ€§å€¼</span><br><span class="line">        <span class="string">"""Set element attribute.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Equivalent to attrib[key] = value, but some implementations may handle</span></span><br><span class="line"><span class="string">        this a bit more efficiently.  *key* is what attribute to set, and</span></span><br><span class="line"><span class="string">        *value* is the attribute value to set it to.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.attrib[key] = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keys</span><span class="params">(self)</span>:</span></span><br><span class="line">        è·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§çš„ key</span><br><span class="line"></span><br><span class="line">        <span class="string">"""Get list of attribute names.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Names are returned in an arbitrary order, just like an ordinary</span></span><br><span class="line"><span class="string">        Python dict.  Equivalent to attrib.keys()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.attrib.keys()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">items</span><span class="params">(self)</span>:</span></span><br><span class="line">        è·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§å€¼ï¼Œæ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹</span><br><span class="line">        <span class="string">"""Get element attributes as a sequence.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The attributes are returned in arbitrary order.  Equivalent to</span></span><br><span class="line"><span class="string">        attrib.items().</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Return a list of (name, value) tuples.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.attrib.items()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">iter</span><span class="params">(self, tag=None)</span>:</span></span><br><span class="line">        åœ¨å½“å‰èŠ‚ç‚¹çš„å­å­™ä¸­æ ¹æ®èŠ‚ç‚¹åç§°å¯»æ‰¾æ‰€æœ‰æŒ‡å®šçš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆå¯ä»¥è¢«<span class="keyword">for</span>å¾ªç¯ï¼‰ã€‚</span><br><span class="line">        <span class="string">"""Create tree iterator.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The iterator loops over the element and all subelements in document</span></span><br><span class="line"><span class="string">        order, returning all elements with a matching tag.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        If the tree structure is modified during iteration, new or removed</span></span><br><span class="line"><span class="string">        elements may or may not be included.  To get a stable set, use the</span></span><br><span class="line"><span class="string">        list() function on the iterator, and loop over the resulting list.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        *tag* is what tags to look for (default is to return all elements)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Return an iterator containing all the matching elements.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> tag == <span class="string">"*"</span>:</span><br><span class="line">            tag = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> tag <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> self.tag == tag:</span><br><span class="line">            <span class="keyword">yield</span> self</span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self._children:</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> e.iter(tag)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># compatibility</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getiterator</span><span class="params">(self, tag=None)</span>:</span></span><br><span class="line">        <span class="comment"># Change for a DeprecationWarning in 1.4</span></span><br><span class="line">        warnings.warn(</span><br><span class="line">            <span class="string">"This method will be removed in future versions.  "</span></span><br><span class="line">            <span class="string">"Use 'elem.iter()' or 'list(elem.iter())' instead."</span>,</span><br><span class="line">            PendingDeprecationWarning, stacklevel=<span class="number">2</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> list(self.iter(tag))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">itertext</span><span class="params">(self)</span>:</span></span><br><span class="line">        åœ¨å½“å‰èŠ‚ç‚¹çš„å­å­™ä¸­æ ¹æ®èŠ‚ç‚¹åç§°å¯»æ‰¾æ‰€æœ‰æŒ‡å®šçš„èŠ‚ç‚¹çš„å†…å®¹ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆå¯ä»¥è¢«<span class="keyword">for</span>å¾ªç¯ï¼‰ã€‚</span><br><span class="line">        <span class="string">"""Create text iterator.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The iterator loops over the element and all subelements in document</span></span><br><span class="line"><span class="string">        order, returning all inner text.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        tag = self.tag</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(tag, str) <span class="keyword">and</span> tag <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> self.text:</span><br><span class="line">            <span class="keyword">yield</span> self.text</span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self:</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> e.itertext()</span><br><span class="line">            <span class="keyword">if</span> e.tail:</span><br><span class="line">                <span class="keyword">yield</span> e.tail</span><br></pre></td></tr></table></figure>

<h2 id="éå†XMLæ–‡æ¡£çš„æ‰€æœ‰å†…å®¹"><a href="#éå†XMLæ–‡æ¡£çš„æ‰€æœ‰å†…å®¹" class="headerlink" title="éå†XMLæ–‡æ¡£çš„æ‰€æœ‰å†…å®¹"></a>éå†XMLæ–‡æ¡£çš„æ‰€æœ‰å†…å®¹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç›´æ¥è§£æxmlæ–‡ä»¶</span></span><br><span class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–é¡¶å±‚æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†xmlæ–‡æ¡£çš„ç¬¬äºŒå±‚</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> root:</span><br><span class="line">    <span class="comment"># ç¬¬äºŒå±‚èŠ‚ç‚¹çš„æ ‡ç­¾åç§°å’Œæ ‡ç­¾å±æ€§</span></span><br><span class="line">    print(i.tag, i.attrib)</span><br><span class="line">    <span class="comment"># éå†xmlæ–‡æ¡£çš„ç¬¬ä¸‰å±‚</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> i:</span><br><span class="line">        print(j.tag, j.text)</span><br><span class="line">        </span><br><span class="line"> ------------</span><br><span class="line">data</span><br><span class="line">country &#123;<span class="string">'name'</span>: <span class="string">'Liechtenstein'</span>&#125;</span><br><span class="line">rank <span class="number">2</span></span><br><span class="line">year <span class="number">2023</span></span><br><span class="line">gdppc <span class="number">141100</span></span><br><span class="line">neighbor <span class="literal">None</span></span><br><span class="line">neighbor <span class="literal">None</span></span><br><span class="line">country &#123;<span class="string">'name'</span>: <span class="string">'Singapore'</span>&#125;</span><br><span class="line">rank <span class="number">5</span></span><br><span class="line">year <span class="number">2026</span></span><br><span class="line">gdppc <span class="number">59900</span></span><br><span class="line">neighbor <span class="literal">None</span></span><br><span class="line">country &#123;<span class="string">'name'</span>: <span class="string">'Panama'</span>&#125;</span><br><span class="line">rank <span class="number">69</span></span><br><span class="line">year <span class="number">2026</span></span><br><span class="line">gdppc <span class="number">13600</span></span><br><span class="line">neighbor <span class="literal">None</span></span><br><span class="line">neighbor <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<h2 id="éå†æŒ‡å®šèŠ‚ç‚¹"><a href="#éå†æŒ‡å®šèŠ‚ç‚¹" class="headerlink" title="éå†æŒ‡å®šèŠ‚ç‚¹"></a>éå†æŒ‡å®šèŠ‚ç‚¹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥è§£æxmlæ–‡ä»¶</span></span><br><span class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–é¡¶å±‚æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># root.iter()çš„å‚æ•°ä¸­å¯ä»¥å¡«å…¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">"gdppc"</span>):</span><br><span class="line">    <span class="comment"># èŠ‚ç‚¹çš„æ ‡ç­¾åç§°å’Œå†…å®¹</span></span><br><span class="line">    print(node.tag, node.text)</span><br><span class="line">    </span><br><span class="line">------------</span><br><span class="line">data</span><br><span class="line">gdppc <span class="number">141100</span></span><br><span class="line">gdppc <span class="number">59900</span></span><br><span class="line">gdppc <span class="number">13600</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹"><a href="#ä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹" class="headerlink" title="ä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹"></a>ä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹</h2><p>ç”±äºä¿®æ”¹èŠ‚ç‚¹æ—¶ï¼Œå‡æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸ä¼šå½±å“åˆ°æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦ä¿®æ”¹ï¼Œåˆ™éœ€è¦é‡æ–°å°†å†…å­˜ä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ã€‚</p>
<ul>
<li>è§£æå­—ç¬¦åˆ›çš„æ–¹å¼æ¥ä¿®æ”¹å’Œä¿å­˜</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶,å°†æ–‡ä»¶çš„å†…å®¹è¯»åˆ°å†…å­˜ä¸­</span></span><br><span class="line">str_xml = open(<span class="string">"xo.xml"</span>, <span class="string">'r'</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è§£ææˆxmlç‰¹æ®Šå¯¹è±¡,rootä»£æŒ‡xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.XML(str_xml)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ“ä½œxmlå¯¹è±¡</span></span><br><span class="line"><span class="comment"># æ‰“å°ä¸€ä¸‹é¡¶å±‚çš„æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯æ‰€æœ‰çš„yearèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">"year"</span>):</span><br><span class="line">    <span class="comment"># å°†yearèŠ‚ç‚¹ä¸­çš„å†…å®¹è‡ªå¢ä¸€</span></span><br><span class="line">    new_year = int(node.text) + <span class="number">1</span></span><br><span class="line">    node.text = str(new_year)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®å±æ€§</span></span><br><span class="line">    node.set(<span class="string">"name"</span>, <span class="string">"polarsnow"</span>)</span><br><span class="line">    node.set(<span class="string">"age"</span>, <span class="string">"25"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ é™¤å±æ€§</span></span><br><span class="line">    <span class="keyword">del</span> node.attrib[<span class="string">"age"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ–‡ä»¶</span></span><br><span class="line"><span class="comment">## ä½¿ç”¨è¯»å–å­—ç¬¦ä¸²çš„æ–¹å¼åœ¨ä¿å­˜ä¹‹å‰éœ€è¦å…ˆåˆ›å»ºElementTreeå¯¹è±¡</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"newxo.xml"</span>, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>è§£ææ–‡ä»¶çš„æ–¹å¼æ¥ä¿®æ”¹å’Œä¿å­˜</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥è§£æxmlæ–‡ä»¶</span></span><br><span class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ“ä½œxmlå¯¹è±¡</span></span><br><span class="line"><span class="comment"># é¡¶å±‚æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯æ‰€æœ‰çš„yearèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">"year"</span>):</span><br><span class="line">    <span class="comment"># å°†yearèŠ‚ç‚¹ä¸­çš„å†…å®¹è‡ªå¢ä¸€</span></span><br><span class="line">    new_year = int(node.text) + <span class="number">1</span></span><br><span class="line">    node.text = str(new_year)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®å±æ€§</span></span><br><span class="line">    node.set(<span class="string">"name"</span>, <span class="string">"polarsnow"</span>)</span><br><span class="line">    node.set(<span class="string">"age"</span>, <span class="string">"25"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ é™¤å±æ€§</span></span><br><span class="line">    <span class="keyword">del</span> node.attrib[<span class="string">"age"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ–‡ä»¶</span></span><br><span class="line"><span class="comment">## ä½¿ç”¨parseçš„æ–¹å¼ç›´æ¥è§£æxmlæ–‡ä»¶ï¼Œå·²ç»ç”Ÿæˆäº†ElementTreeå¯¹è±¡</span></span><br><span class="line"><span class="comment">## å¯ä»¥ç›´æ¥è°ƒç”¨å†™çš„æ–¹æ³•</span></span><br><span class="line">tree.write(<span class="string">"newxo.xml"</span>, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>xo.xml</code> </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Liechtenstein"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2023<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Austria"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Switzerland"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Singapore"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"N"</span> <span class="attr">name</span>=<span class="string">"Malaysia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Panama"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Costa Rica"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Colombia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>newxo.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Liechtenstein"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span> <span class="attr">name</span>=<span class="string">"polarsnow"</span>&gt;</span>2024<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Austria"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Switzerland"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Singapore"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span> <span class="attr">name</span>=<span class="string">"polarsnow"</span>&gt;</span>2027<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"N"</span> <span class="attr">name</span>=<span class="string">"Malaysia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Panama"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span> <span class="attr">name</span>=<span class="string">"polarsnow"</span>&gt;</span>2027<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Costa Rica"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Colombia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h2><ul>
<li>è§£æå­—ç¬¦ä¸²çš„æ–¹å¼æ¥åˆ é™¤èŠ‚ç‚¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–XMLå†…å®¹</span></span><br><span class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è§£ææˆxmlç‰¹æ®Šå¯¹è±¡ï¼Œrootä»£æŒ‡xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.XML(str_xml)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ“ä½œxmlå¯¹è±¡</span></span><br><span class="line"><span class="comment"># é¡¶å±‚æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†dataä¸‹çš„æ‰€æœ‰countryèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</span><br><span class="line">    <span class="comment"># è·å–æ¯ä¸€ä¸ªcountryèŠ‚ç‚¹ä¸‹rankèŠ‚ç‚¹çš„å†…å®¹</span></span><br><span class="line">    rank = int(country.find(<span class="string">'rank'</span>).text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</span><br><span class="line">        <span class="comment"># åˆ é™¤æŒ‡å®šcountryèŠ‚ç‚¹</span></span><br><span class="line">        root.remove(country)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ–‡ä»¶</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"newxo.xml"</span>, encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>è§£ææ–‡ä»¶çš„æ–¹å¼æ¥åˆ é™¤èŠ‚ç‚¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥è§£æxmlæ–‡ä»¶</span></span><br><span class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ“ä½œxmlå¯¹è±¡</span></span><br><span class="line"><span class="comment"># é¡¶å±‚æ ‡ç­¾</span></span><br><span class="line">print(root.tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†dataä¸‹çš„æ‰€æœ‰countryèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</span><br><span class="line">    <span class="comment"># è·å–æ¯ä¸€ä¸ªcountryèŠ‚ç‚¹ä¸‹rankèŠ‚ç‚¹çš„å†…å®¹</span></span><br><span class="line">    rank = int(country.find(<span class="string">'rank'</span>).text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</span><br><span class="line">        <span class="comment"># åˆ é™¤æŒ‡å®šcountryèŠ‚ç‚¹</span></span><br><span class="line">        root.remove(country)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ–‡ä»¶</span></span><br><span class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="åˆ›å»ºxmlæ–‡æ¡£"><a href="#åˆ›å»ºxmlæ–‡æ¡£" class="headerlink" title="åˆ›å»ºxmlæ–‡æ¡£"></a>åˆ›å»ºxmlæ–‡æ¡£</h1><ul>
<li>ç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.Element(<span class="string">"World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºäºŒçº§èŠ‚ç‚¹</span></span><br><span class="line">country1 = ET.Element(<span class="string">"country"</span>, &#123;<span class="string">"name"</span>: <span class="string">"China"</span>&#125;)</span><br><span class="line">country2 = ET.Element(<span class="string">"country"</span>, &#123;<span class="string">"name"</span>: <span class="string">"America"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸‰çº§èŠ‚ç‚¹</span></span><br><span class="line">city1 = ET.Element(<span class="string">"city"</span>, &#123;<span class="string">"name"</span>: <span class="string">"BeiJing"</span>&#125;)</span><br><span class="line">city2 = ET.Element(<span class="string">"city"</span>, &#123;<span class="string">"name"</span>: <span class="string">"TangShan"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠåˆ›å»ºçš„ä¸‰çº§èŠ‚ç‚¹æ·»åŠ åˆ°äºŒçº§èŠ‚ç‚¹ä¸‹é¢</span></span><br><span class="line">country1.append(city1)</span><br><span class="line">country1.append(city2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æŠŠäºŒçº§èŠ‚ç‚¹æ·»åŠ åˆ°è·ŸèŠ‚ç‚¹ä¸­</span></span><br><span class="line">root.append(country1)</span><br><span class="line">root.append(country2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºElementTreeå¯¹è±¡</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"xxxx.xml"</span>, encoding=<span class="string">"utf-8"</span>, short_empty_elements=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p><img src="http://oss.20150509.cn/QQ20160623-0@2x.png" alt=""></p>
<ul>
<li>ç¬¬äºŒç§åˆ›å»ºæ–¹å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.Element(<span class="string">"World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºäºŒçº§èŠ‚ç‚¹</span></span><br><span class="line">country1 = root.makeelement(<span class="string">"country"</span>, &#123;<span class="string">"name"</span>: <span class="string">"China"</span>&#125;)</span><br><span class="line">country2 = root.makeelement(<span class="string">"country"</span>, &#123;<span class="string">"name"</span>: <span class="string">"America"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸‰çº§èŠ‚ç‚¹</span></span><br><span class="line">city1 = country1.makeelement(<span class="string">"city"</span>, &#123;<span class="string">"name"</span>: <span class="string">"BeiJing"</span>&#125;)</span><br><span class="line">city2 = country1.makeelement(<span class="string">"city"</span>, &#123;<span class="string">"name"</span>: <span class="string">"TangShan"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠåˆ›å»ºçš„ä¸‰çº§èŠ‚ç‚¹æ·»åŠ åˆ°äºŒçº§èŠ‚ç‚¹ä¸‹é¢</span></span><br><span class="line">country1.append(city1)</span><br><span class="line">country1.append(city2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æŠŠäºŒçº§èŠ‚ç‚¹æ·»åŠ åˆ°è·ŸèŠ‚ç‚¹ä¸­</span></span><br><span class="line">root.append(country1)</span><br><span class="line">root.append(country2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºElementTreeå¯¹è±¡</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"xxxx.xml"</span>, encoding=<span class="string">"utf-8"</span>, short_empty_elements=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬ä¸‰ç§åˆ›å»ºæ–¹å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.Element(<span class="string">"World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºäºŒçº§èŠ‚ç‚¹</span></span><br><span class="line">country1 = ET.SubElement(root, <span class="string">"country"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"China"</span>&#125;)</span><br><span class="line">country2 = ET.SubElement(root, <span class="string">"country"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"America"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸‰çº§èŠ‚ç‚¹</span></span><br><span class="line">city1 = ET.SubElement(country1, <span class="string">"city"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"BeiJing"</span>&#125;)</span><br><span class="line">city2 = ET.SubElement(country1, <span class="string">"city"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"TangShan"</span>&#125;)</span><br><span class="line"></span><br><span class="line">et = ET.ElementTree(root)  <span class="comment"># ç”Ÿæˆæ–‡æ¡£å¯¹è±¡</span></span><br><span class="line"><span class="comment"># xml_declaration æ·»åŠ xmlç‰ˆæœ¬ä¿¡æ¯æ³¨é‡Š</span></span><br><span class="line">et.write(<span class="string">"test.xml"</span>, encoding=<span class="string">"utf-8"</span>, xml_declaration=<span class="literal">True</span>, short_empty_elements=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§æ–¹å¼ä¸åŒäºä¸Šé¢ä¸¤ç§æ–¹å¼çš„æ˜¯åœ¨åˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå·²ç»æŒ‡å®šäº†è¯¥èŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹çš„å…³ç³»ã€‚</p>
<ul>
<li>ç¼©è¿›</li>
</ul>
<p>åŸç”Ÿä¿å­˜çš„XMLé»˜è®¤æ²¡æœ‰ç¼©è¿›ï¼Œå¦‚æœéœ€è¦ç¼©è¿›ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prettify</span><span class="params">(elem)</span>:</span></span><br><span class="line">    <span class="string">"""å°†èŠ‚ç‚¹è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå¹¶æ·»åŠ ç¼©è¿›"""</span></span><br><span class="line">    rough_string = ET.tostring(elem, <span class="string">'utf-8'</span>)</span><br><span class="line">    reparsed = minidom.parseString(rough_string)</span><br><span class="line">    <span class="keyword">return</span> reparsed.toprettyxml(indent=<span class="string">"\t"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = ET.Element(<span class="string">"World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºäºŒçº§èŠ‚ç‚¹</span></span><br><span class="line">country1 = ET.SubElement(root, <span class="string">"country"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"China"</span>&#125;)</span><br><span class="line">country2 = ET.SubElement(root, <span class="string">"country"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"America"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸‰çº§èŠ‚ç‚¹</span></span><br><span class="line">city1 = ET.SubElement(country1, <span class="string">"city"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"BeiJing"</span>&#125;)</span><br><span class="line">city2 = ET.SubElement(country1, <span class="string">"city"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"TangShan"</span>&#125;)</span><br><span class="line"></span><br><span class="line">raw_str = prettify(root)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"xxoo.xml"</span>, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(raw_str)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/22/Python%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97configparser/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/22/Python%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97configparser/" class="post-title-link" itemprop="url">Pythoné…ç½®æ–‡ä»¶æ¨¡å—configparser</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-22 00:41:41" itemprop="dateCreated datePublished" datetime="2016-06-22T00:41:41+08:00">2016-06-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/22/Python%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97configparser/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/22/Pythoné…ç½®æ–‡ä»¶æ¨¡å—configparser/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p> Pythonä¸­çš„configparseræ¨¡å—ç”¨æ¥å¤„ç†ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨openæ¥æ“ä½œæ–‡ä»¶ã€‚</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="configparseræŒ‡å®šçš„æ ¼å¼"><a href="#configparseræŒ‡å®šçš„æ ¼å¼" class="headerlink" title="configparseræŒ‡å®šçš„æ ¼å¼"></a>configparseræŒ‡å®šçš„æ ¼å¼</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨é‡Š1</span><br><span class="line">;  æ³¨é‡Š2</span><br><span class="line"> </span><br><span class="line">[section1] # èŠ‚ç‚¹</span><br><span class="line">k1 &#x3D; v1    # å€¼</span><br><span class="line">k2:v2       # å€¼</span><br><span class="line"> </span><br><span class="line">[section2] # èŠ‚ç‚¹</span><br><span class="line">k1 &#x3D; v1    # å€¼</span><br></pre></td></tr></table></figure>

<h1 id="è·å–æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯"><a href="#è·å–æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="è·å–æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯"></a>è·å–æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯</h1><p>å®ä¾‹é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line">version&#x3D;5.7</span><br><span class="line"></span><br><span class="line">[python]</span><br><span class="line">version:3.5</span><br></pre></td></tr></table></figure>

<p>ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">ret = config.sections()</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'mysql'</span>, <span class="string">'python'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹"><a href="#è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹" class="headerlink" title="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹"></a>è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">ret = config.items(<span class="string">'mysql'</span>)</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[(<span class="string">'version'</span>, <span class="string">'5.7'</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®"><a href="#è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®" class="headerlink" title="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®"></a>è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰é”®</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">ret = config.options(<span class="string">'mysql'</span>)</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'version'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å€¼"><a href="#è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å€¼" class="headerlink" title="è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å€¼"></a>è·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å€¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="comment"># ret = config.get('mysql', 'version')</span></span><br><span class="line"><span class="comment"># print(ret, type(ret))</span></span><br><span class="line"><span class="comment"># ret = config.getint('mysql', 'version')</span></span><br><span class="line"><span class="comment"># print(ret, type(ret))</span></span><br><span class="line">ret = config.getfloat(<span class="string">'mysql'</span>, <span class="string">'version'</span>)</span><br><span class="line">print(ret, type(ret))</span><br><span class="line"><span class="comment"># ret = config.getboolean('mysql', 'version')</span></span><br><span class="line"><span class="comment"># print(ret, type(ret))</span></span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">5.7</span> &lt;<span class="class"><span class="keyword">class</span> '<span class="title">float</span>'&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="èŠ‚ç‚¹çš„å¢åˆ æŸ¥"><a href="#èŠ‚ç‚¹çš„å¢åˆ æŸ¥" class="headerlink" title="èŠ‚ç‚¹çš„å¢åˆ æŸ¥"></a>èŠ‚ç‚¹çš„å¢åˆ æŸ¥</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰æŒ‡å®šçš„èŠ‚ç‚¹</span></span><br><span class="line">has_sec = config.has_section(<span class="string">'mysql'</span>)</span><br><span class="line">print(has_sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">config.add_section(<span class="string">'java'</span>)</span><br><span class="line">config.write(open(<span class="string">'test.conf'</span>, <span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ é™¤å·²æœ‰çš„èŠ‚ç‚¹</span></span><br><span class="line">config.remove_section(<span class="string">'python'</span>)</span><br><span class="line">config.write(open(<span class="string">'test.conf'</span>, <span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; cat test.conf</span><br><span class="line">[mysql]</span><br><span class="line">version = 5.7</span><br><span class="line"></span><br><span class="line">[java]</span><br></pre></td></tr></table></figure>

<h1 id="èŠ‚ç‚¹å†…é”®å€¼å¯¹çš„åˆ æ”¹æŸ¥"><a href="#èŠ‚ç‚¹å†…é”®å€¼å¯¹çš„åˆ æ”¹æŸ¥" class="headerlink" title="èŠ‚ç‚¹å†…é”®å€¼å¯¹çš„åˆ æ”¹æŸ¥"></a>èŠ‚ç‚¹å†…é”®å€¼å¯¹çš„åˆ æ”¹æŸ¥</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; cat test.conf</span><br><span class="line">[mysql]</span><br><span class="line">version = 5.7</span><br><span class="line">path = /usr/<span class="built_in">local</span>/mysql</span><br><span class="line"></span><br><span class="line">[java]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'test.conf'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰æŒ‡å®šçš„èŠ‚ç‚¹</span></span><br><span class="line">has_opt = config.has_option(<span class="string">'mysql'</span>, <span class="string">'version'</span>)</span><br><span class="line">print(has_opt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹èŠ‚ç‚¹</span></span><br><span class="line">config.set(<span class="string">'mysql'</span>, <span class="string">'path'</span>, <span class="string">'/usr/local/src/mysql'</span>)</span><br><span class="line">config.write(open(<span class="string">'test.conf'</span>, <span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤èŠ‚ç‚¹ä¸‹æŒ‡å®šçš„é”®å€¼å¯¹</span></span><br><span class="line">config.remove_option(<span class="string">'mysql'</span>, <span class="string">'version'</span>)</span><br><span class="line">config.write(open(<span class="string">'test.conf'</span>, <span class="string">'w'</span>))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; cat test.conf</span><br><span class="line">[mysql]</span><br><span class="line">path = /usr/<span class="built_in">local</span>/src/mysql</span><br><span class="line"></span><br><span class="line">[java]</span><br></pre></td></tr></table></figure>

<p>configparseræ¨¡å—ä¸­ï¼Œ<strong>å¯¹èŠ‚ç‚¹æ²¡æœ‰ä¿®æ”¹çš„æ“ä½œ</strong>ï¼Œ<strong>å¯¹èŠ‚ç‚¹ä¸‹çš„é”®å€¼å¯¹æ²¡æœ‰å¢åŠ çš„æ“ä½œ</strong></p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/17/Python%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E5%9D%97re/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/17/Python%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E5%9D%97re/" class="post-title-link" itemprop="url">Pythonçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—re</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-17 00:39:49" itemprop="dateCreated datePublished" datetime="2016-06-17T00:39:49+08:00">2016-06-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/17/Python%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E5%9D%97re/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/17/Pythonçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—re/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>åœ¨Pythonä¸­<code>re</code>æ¨¡å—æä¾›äº†æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ“ä½œã€‚å…¶æœ¬è´¨ï¼ŒREæ˜¯ä¸€ç§å°å‹çš„ï¼Œé«˜åº¦ä¸“ä¸šåŒ–çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€šè¿‡reæ¨¡å—æ¥å®ç°å…¶åŠŸèƒ½ã€‚æ­£åˆ™è¡¨è¾¾å¼è¢«ç¼–è¯‘æˆä¸€ç³»åˆ—å­—èŠ‚ç ï¼Œç„¶åç”±Cç¼–å†™çš„åŒ¹é…å¼•æ“æ‰§è¡Œã€‚</p>
<p>æˆ‘ä»¬å°†æ¶‰åŠä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œè¿™å°†è¢«ç”¨äºå¤„ç†çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯é¦–å…ˆï¼šæœ‰å„ç§å„æ ·çš„å­—ç¬¦ï¼Œå½“å®ƒä»¬åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œå°†æœ‰ç‰¹æ®Šçš„æ„ä¹‰ã€‚ä¸ºäº†é¿å…åœ¨å¤„ç†æ­£åˆ™è¡¨è¾¾å¼çš„ä»»ä½•å›°æƒ‘ï¼Œå°†ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²ä½œä¸ºrâ€™expressionâ€œã€‚</p>
<p>Python Versionï¼š3.5+</p>
</blockquote>
<h1 id="åŒ¹é…"><a href="#åŒ¹é…" class="headerlink" title="åŒ¹é…"></a>åŒ¹é…</h1><h2 id="å­—ç¬¦åŒ¹é…"><a href="#å­—ç¬¦åŒ¹é…" class="headerlink" title="å­—ç¬¦åŒ¹é…"></a>å­—ç¬¦åŒ¹é…</h2><ul>
<li>.        é»˜è®¤åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</li>
<li>^        åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</li>
<li>$        åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ</li>
<li>[]    æŒ‡å®šå­—ç¬¦èŒƒå›´åŒ¹é…</li>
<li>|        æˆ–</li>
<li>\        è½¬ä¹‰å­—ç¬¦ï¼Œåæ–œæ æœ¬èº«éœ€è¦åæ–œæ å»è½¬ä¹‰</li>
<li>()    åˆ†ç»„ï¼Œå»å·²ç»åŒ¹é…åˆ°çš„æ•°æ®ä¸­å†å»æå–æ•°æ®</li>
<li>\d  åŒ¹é…ä»»ä½•åè¿›åˆ¶æ•°ï¼›å®ƒç›¸å½“äºç±» [0-9]ã€‚</li>
<li>\D  åŒ¹é…ä»»ä½•éæ•°å­—å­—ç¬¦ï¼›å®ƒç›¸å½“äºç±» [^0-9]ã€‚</li>
<li>\s  åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼›å®ƒç›¸å½“äºç±»  [ \t\n\r\f\v]ã€‚</li>
<li>\S  åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ï¼›å®ƒç›¸å½“äºç±» [^ \t\n\r\f\v]ã€‚</li>
<li>\w  åŒ¹é…ä»»ä½•å­—æ¯æ•°å­—å­—ç¬¦ï¼›å®ƒç›¸å½“äºç±» [a-zA-Z0-9_]ã€‚</li>
<li>\W  åŒ¹é…ä»»ä½•éå­—æ¯æ•°å­—å­—ç¬¦ï¼›å®ƒç›¸å½“äºç±» [^a-zA-Z0-9_]</li>
<li>\b    åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œ â€˜er\bâ€™ å¯ä»¥åŒ¹é…â€neverâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸èƒ½åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ã€‚</li>
<li>\B    åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€™er\Bâ€™ èƒ½åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸èƒ½åŒ¹é… â€œneverâ€ ä¸­çš„ â€˜erâ€™ã€‚</li>
</ul>
<h2 id="æ¬¡æ•°åŒ¹é…"><a href="#æ¬¡æ•°åŒ¹é…" class="headerlink" title="æ¬¡æ•°åŒ¹é…"></a>æ¬¡æ•°åŒ¹é…</h2><ul>
<li><ul>
<li>é‡å¤0æ¬¡æˆ–å¤šæ¬¡</li>
</ul>
</li>
<li><ul>
<li>é‡å¤1æ¬¡æˆ–å¤šæ¬¡</li>
</ul>
</li>
<li>?        é‡å¤0æ¬¡æˆ–1æ¬¡</li>
<li>{n}    é‡å¤næ¬¡</li>
<li>{n,}    é‡å¤næ¬¡æˆ–å¤šæ¬¡</li>
<li>{n, m}    é‡å¤næ¬¡åˆ°mæ¬¡</li>
</ul>
<h2 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h2><ul>
<li>re.I    ä½¿åŒ¹é…å¯¹å¤§å°å†™ä¸æ•æ„Ÿ</li>
<li>re.L    åšæœ¬åœ°åŒ–è¯†åˆ«ï¼ˆlocale-awareï¼‰åŒ¹é…</li>
<li>re.M    å¤šè¡ŒåŒ¹é…ï¼Œå½±å“ ^ å’Œ $</li>
<li>re.S    ä½¿ . åŒ¹é…åŒ…æ‹¬æ¢è¡Œåœ¨å†…çš„æ‰€æœ‰å­—ç¬¦</li>
<li>re.U    æ ¹æ®Unicodeå­—ç¬¦é›†è§£æå­—ç¬¦ã€‚è¿™ä¸ªæ ‡å¿—å½±å“ \w, \W, \b, \B.</li>
<li>re.X    è¯¥æ ‡å¿—é€šè¿‡ç»™äºˆä½ æ›´çµæ´»çš„æ ¼å¼ä»¥ä¾¿ä½ å°†æ­£åˆ™è¡¨è¾¾å¼å†™å¾—æ›´æ˜“äºç†è§£ã€‚</li>
</ul>
<h1 id="æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹"><a href="#æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹"></a>æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹</h1><h2 id="æ™®é€šå­—ç¬¦åŒ¹é…"><a href="#æ™®é€šå­—ç¬¦åŒ¹é…" class="headerlink" title="æ™®é€šå­—ç¬¦åŒ¹é…"></a>æ™®é€šå­—ç¬¦åŒ¹é…</h2><ul>
<li><code>python</code>    åŒ¹é… <code>python</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r"python"</span>, <span class="string">"Pythonpythoner"</span>, re.I)</span><br><span class="line">[<span class="string">'Python'</span>, <span class="string">'python'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="é”šç‚¹åŒ¹é…"><a href="#é”šç‚¹åŒ¹é…" class="headerlink" title="é”šç‚¹åŒ¹é…"></a>é”šç‚¹åŒ¹é…</h2><ul>
<li><code>^python$</code>     åŒ¹é…ä»¥<code>python</code>å¼€å¤´ç»“å°¾çš„å­—ç¬¦ä¸²</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r"^python$"</span>, <span class="string">"Pythonpythoner"</span>, re.I)</span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r"^python$"</span>, <span class="string">"Python"</span>, re.I)</span><br><span class="line">[<span class="string">'Python'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="èŒƒå›´åŒ¹é…"><a href="#èŒƒå›´åŒ¹é…" class="headerlink" title="èŒƒå›´åŒ¹é…"></a>èŒƒå›´åŒ¹é…</h2><ul>
<li>[Pp]ython    åŒ¹é… â€œPythonâ€ æˆ– â€œpythonâ€</li>
<li>rub[ye]    åŒ¹é… â€œrubyâ€ æˆ– â€œrubeâ€</li>
<li>[aeiou]    åŒ¹é…ä¸­æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—æ¯</li>
<li>[0-9]    åŒ¹é…ä»»ä½•æ•°å­—ã€‚ç±»ä¼¼äº [0123456789]</li>
<li>[a-z]    åŒ¹é…ä»»ä½•å°å†™å­—æ¯</li>
<li>[A-Z]    åŒ¹é…ä»»ä½•å¤§å†™å­—æ¯</li>
<li>[a-zA-Z0-9]    åŒ¹é…ä»»ä½•å­—æ¯åŠæ•°å­—</li>
<li>[^aeiou]    é™¤äº†aeiouå­—æ¯ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦</li>
<li>[^0-9]    åŒ¹é…é™¤äº†æ•°å­—å¤–çš„å­—ç¬¦</li>
</ul>
<h2 id="æˆ–åŒ¹é…"><a href="#æˆ–åŒ¹é…" class="headerlink" title="æˆ–åŒ¹é…"></a>æˆ–åŒ¹é…</h2><ul>
<li><code>python|java</code>        åŒ¹é…<code>python</code>æˆ–<code>java</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r"python|java"</span>, <span class="string">"Python and java"</span>, re.I)</span><br><span class="line">[<span class="string">'Python'</span>, <span class="string">'java'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="åŒ¹é…åæ–œæ "><a href="#åŒ¹é…åæ–œæ " class="headerlink" title="åŒ¹é…åæ–œæ "></a>åŒ¹é…åæ–œæ </h2><ul>
<li><code>\\</code> åŒ¹é…<code>\</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r"\\"</span>, <span class="string">"Python\ and java"</span>, re.I)</span><br><span class="line">[<span class="string">'\\'</span>]</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šåœ¨åŒ¹é…çš„ä½¿ç”¨ï¼Œå¦‚æœæƒ³åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªåæ–œæ ï¼Œéœ€è¦åœ¨åŸç”Ÿå­—ç¬¦ä¸²ä¸­å†™ä¸¤ä¸ªåæ–œæ ã€‚åœ¨åŒ¹é…ç»“æœä¸­ï¼Œreä¸­åŒ¹é…åˆ°äº†ä¸€ä¸ª<code>\</code>ä½†æ˜¯è¿”å›çš„å´æ˜¯<code>\\</code>ï¼Œæ˜¯å› ä¸ºPythonä¸­ä¹Ÿéœ€è¦ä½¿ç”¨ä¸¤ä¸ªåæ–œæ æ¥è¡¨ç¤ºä¸€ä¸ªåæ–œæ </p>
<p>è¿™é‡Œéœ€è¦è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š<strong>Pythonä¸reä¹‹é—´çš„è½¬ä¹‰</strong></p>
<p>åœ¨ä¹‹å‰çš„ç¬”è®°ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“<code>åŸç”Ÿå­—ç¬¦ä¸²</code>çš„æ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯æˆ‘åœ¨pythonä¸­ä¸€æ—¦åœ¨å­—ç¬¦ä¸²å‰é¢åŠ äº†<code>r</code>å°±è¡¨ç¤ºåé¢è¿™ä¸²å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„å­—ç¬¦éƒ½å½“åšæ™®é€šå­—ç¬¦æ¥å¤„ç†ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†åŸç”Ÿå­—ç¬¦ä¸²çš„å†™æ³•ï¼Œå£°æ˜å­—ç¬¦ä¸²ä¸­çš„<code>\</code>å·²ç»æ˜¯æ™®é€šå­—ç¬¦äº†ï¼Œä¸ºä»€ä¹ˆåˆ°äº†reä¸­ï¼Œéœ€è¦pythonç»™å‡º<code>\\</code>æ‰èƒ½åŒ¹é…åˆ°<code>\</code>å‘¢ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'\\'</span>)</span><br><span class="line">\</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">r'\\'</span>)</span><br><span class="line">\\</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºï¼Œreå’ŒPythonå…¶å®æ˜¯ä¸¤å¥—ç³»ç»Ÿï¼Œåœ¨Pythonä¸­è™½ç„¶æ˜ç¡®ç»™å‡ºäº†è®©reå»åŒ¹é…<code>\</code>ï¼Œä½†æ˜¯è¿™ä¸€ä¸ª<code>\</code>ä¼ é€’ç»™reæ—¶ï¼Œåœ¨reä¸­ä¸€ä¸ª<code>\</code>ä¹Ÿæ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œè¡¨ç¤ºè½¬ä¹‰ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®åœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ°å­—ç¬¦<code>\</code>ï¼Œä¸ºäº†æŠµæ¶ˆæ‰reä¸­<code>\</code>çš„ç‰¹æ®Šå«ä¹‰ï¼Œéœ€è¦ä½¿ç”¨<code>\\</code>æ¥åŒ¹é…åˆ°ä¸€ä¸ª<code>\</code>,æ‰€ä»¥ä»reçš„è§’åº¦æ¥è¯´ï¼Œå°±è¦æ±‚Pythonä¼ é€’è¿‡å»çš„æ˜¯<code>\\</code>æ‰èƒ½è®©reåœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ°<code>\</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">"\\\\"</span>, <span class="string">"Python\ and java"</span>, re.I)</span><br><span class="line">[<span class="string">'\\'</span>]</span><br></pre></td></tr></table></figure>

<p>å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœä¸ä½¿ç”¨åŸç”Ÿå­—ç¬¦ä¸²çš„è¯ï¼Œreä»ç„¶éœ€è¦Pythonä¼ é€’è¿‡å»<code>\\</code>æ‰èƒ½åŒ¹é…åˆ°<code>\</code>ï¼Œä½†æ˜¯Pythonä¸­çš„å­—ç¬¦ä¸²å¦‚æœæ²¡æœ‰å£°æ˜æ˜¯åŸç”Ÿå­—ç¬¦ä¸²çš„è¯éœ€è¦ä½¿ç”¨<code>\\\\</code>æ‰èƒ½è¡¨ç¤º<code>\\</code></p>
<h1 id="reæ¨¡å—"><a href="#reæ¨¡å—" class="headerlink" title="reæ¨¡å—"></a>reæ¨¡å—</h1><p>ä¸Šé¢ç®€å•çš„ä»‹ç»å®Œreçš„åŸºæœ¬è¡¨è¾¾å¼ï¼Œä¸‹é¢å°±å¯ä»¥å®é™…ä½¿ç”¨reçš„å‡½æ•°æ¥æ“ä½œåŒ¹é…å­—ç¬¦ä¸²å•¦</p>
<h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><p>matchï¼Œä»èµ·å§‹ä½ç½®å¼€å§‹åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒæœªåŒ¹é…æˆåŠŸè¿”å›None</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match</span><span class="params">(pattern, string, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Try to apply the pattern at the start of the string, returning</span></span><br><span class="line"><span class="string">    a match object, or None if no match was found."""</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags).match(string)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°</strong></p>
<ul>
<li>pattern    æ­£åˆ™è¡¨è¾¾å¼</li>
<li>string    å­—ç¬¦ä¸²</li>
<li>flags    ç¼–è¯‘æ ‡å¿—ä½ï¼Œç”¨äºä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šæ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œå¤šè¡ŒåŒ¹é…ç­‰ç­‰ã€‚</li>
</ul>
<p><strong>åŒ¹é…å¯¹è±¡æ–¹æ³•</strong></p>
<ul>
<li>group()    è·å–åŒ¹é…åˆ°çš„æ‰€æœ‰ç»“æœ</li>
<li>groups()    è·å–æ¨¡å‹ä¸­åŒ¹é…åˆ°çš„åˆ†ç»„ç»“æœ</li>
<li>groupdict() è·å–æ¨¡å‹ä¸­åŒ¹é…åˆ°çš„åˆ†ç»„ç»“æœ</li>
<li>start()    è¿”å›åŒ¹é…å¼€å§‹çš„ä½ç½®</li>
<li>end()    è¿”å›åŒ¹é…ç»“æŸçš„ä½ç½®</li>
<li>span()    è¿”å›ä¸€ä¸ªå…ƒç»„åŒ…å«åŒ¹é… (å¼€å§‹,ç»“æŸ) çš„ä½ç½®</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— åˆ†ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">r = re.match(<span class="string">'com'</span>, <span class="string">'comwww.runcomoob'</span>)</span><br><span class="line">print(r.group())</span><br><span class="line">print(r.groups())</span><br><span class="line">print(r.groupdict())</span><br><span class="line"></span><br><span class="line">r = re.match(<span class="string">'com'</span>, <span class="string">'Comwww.runComoob'</span>, re.I)</span><br><span class="line">print(r.group())</span><br><span class="line">print(r.groups())</span><br><span class="line">print(r.groupdict())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">com</span><br><span class="line">()</span><br><span class="line">&#123;&#125;</span><br><span class="line">Com</span><br><span class="line">()</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ‰åˆ†ç»„</span></span><br><span class="line"><span class="comment"># ä¸ºä½•è¦æœ‰åˆ†ç»„ï¼Ÿæå–åŒ¹é…æˆåŠŸçš„æŒ‡å®šå†…å®¹ï¼ˆå…ˆåŒ¹é…æˆåŠŸå…¨éƒ¨æ­£åˆ™ï¼Œå†åŒ¹é…æˆåŠŸçš„å±€éƒ¨å†…å®¹æå–å‡ºæ¥ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">r = re.match(<span class="string">'c(..)'</span>, <span class="string">'comwww.runcomoob'</span>)</span><br><span class="line">print(r.group())</span><br><span class="line">print(r.groups())</span><br><span class="line">print(r.groupdict())</span><br><span class="line"></span><br><span class="line">r = re.match(<span class="string">'c(..)'</span>, <span class="string">'Comwww.runComoob'</span>, re.I)</span><br><span class="line">print(r.group())</span><br><span class="line">print(r.groups())</span><br><span class="line">print(r.groupdict())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">com</span><br><span class="line">(<span class="string">'om'</span>,)</span><br><span class="line">&#123;&#125;</span><br><span class="line">Com</span><br><span class="line">(<span class="string">'om'</span>,)</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿå–å‡ºæ¥çš„ç»“æœï¼Œ<code>groups()</code>ä¸­æœ‰äº†åŒ¹é…ç»“æœï¼ŒåŒ¹é…çš„æ˜¯<code>group()</code>ä¸­çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨åˆ†ç»„ï¼Œæ„å‘³ç€åœ¨åŒ¹é…åˆ°æ•´ä¸ªå­—ç¬¦ä¸²ä¸­å†æ¬¡è¿›è¡ŒåŒ¹é…å¹¶å–å€¼(å–æ‹¬å·ä¸­çš„å€¼)</p>
<h2 id="search"><a href="#search" class="headerlink" title="search"></a>search</h2><p>search,æµè§ˆæ•´ä¸ªå­—ç¬¦ä¸²å»åŒ¹é…ç¬¬ä¸€ä¸ªï¼ŒæœªåŒ¹é…æˆåŠŸè¿”å›None</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(pattern, string, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Scan through string looking for a match to the pattern, returning</span></span><br><span class="line"><span class="string">    a match object, or None if no match was found."""</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags).search(string)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°</strong></p>
<ul>
<li>pattern    æ­£åˆ™è¡¨è¾¾å¼</li>
<li>string    å­—ç¬¦ä¸²</li>
<li>flags    ç¼–è¯‘æ ‡å¿—ä½ï¼Œç”¨äºä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šæ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œå¤šè¡ŒåŒ¹é…ç­‰ç­‰ã€‚</li>
</ul>
<p><strong>åŒ¹é…å¯¹è±¡æ–¹æ³•</strong></p>
<ul>
<li>group()    è·å–åŒ¹é…åˆ°çš„æ‰€æœ‰ç»“æœ</li>
<li>groups()    è·å–æ¨¡å‹ä¸­åŒ¹é…åˆ°çš„åˆ†ç»„ç»“æœ</li>
<li>groupdict() è·å–æ¨¡å‹ä¸­åŒ¹é…åˆ°çš„åˆ†ç»„ç»“æœ</li>
<li>start()    è¿”å›åŒ¹é…å¼€å§‹çš„ä½ç½®</li>
<li>end()    è¿”å›åŒ¹é…ç»“æŸçš„ä½ç½®</li>
<li>span()    è¿”å›ä¸€ä¸ªå…ƒç»„åŒ…å«åŒ¹é… (å¼€å§‹,ç»“æŸ) çš„ä½ç½®</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">r = re.search(<span class="string">'\dcom'</span>, <span class="string">'www.4comrunoob.5com'</span>)</span><br><span class="line">print(r.group())</span><br><span class="line">print(r.groups())</span><br><span class="line">print(r.groupdict())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">4</span>com</span><br><span class="line">()</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="re-matchä¸re-searchçš„åŒºåˆ«"><a href="#re-matchä¸re-searchçš„åŒºåˆ«" class="headerlink" title="re.matchä¸re.searchçš„åŒºåˆ«"></a>re.matchä¸re.searchçš„åŒºåˆ«</h1><p>re.matchåªåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå¦‚æœå­—ç¬¦ä¸²å¼€å§‹ä¸ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™åŒ¹é…å¤±è´¥ï¼Œå‡½æ•°è¿”å›Noneï¼›è€Œre.searchåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">line = <span class="string">"Cats are smarter than dogs"</span></span><br><span class="line"></span><br><span class="line">matchObj = re.match(<span class="string">r'dogs'</span>, line, re.M | re.I)</span><br><span class="line"><span class="keyword">if</span> matchObj:</span><br><span class="line">    print(<span class="string">"match --&gt; matchObj.group() : "</span>, matchObj.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"No match!!"</span>)</span><br><span class="line"></span><br><span class="line">matchObj = re.search(<span class="string">r'dogs'</span>, line, re.M | re.I)</span><br><span class="line"><span class="keyword">if</span> matchObj:</span><br><span class="line">    print(<span class="string">"search --&gt; matchObj.group() : "</span>, matchObj.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"No match!!"</span>)</span><br><span class="line">    </span><br><span class="line">------------</span><br><span class="line">No match!!</span><br><span class="line">search --&gt; matchObj.group() :  dogs</span><br></pre></td></tr></table></figure>

<h2 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h2><p>findallï¼Œæ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿”å›</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findall</span><span class="params">(pattern, string, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Return a list of all non-overlapping matches in the string.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    If one or more capturing groups are present in the pattern, return</span></span><br><span class="line"><span class="string">    a list of groups; this will be a list of tuples if the pattern</span></span><br><span class="line"><span class="string">    has more than one group.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Empty matches are included in the result."""</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags).findall(string)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°</strong></p>
<ul>
<li>pattern    æ­£åˆ™è¡¨è¾¾å¼</li>
<li>string    å­—ç¬¦ä¸²</li>
<li>flags    ç¼–è¯‘æ ‡å¿—ä½ï¼Œç”¨äºä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šæ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œå¤šè¡ŒåŒ¹é…ç­‰ç­‰ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— åˆ†ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">r = re.findall(<span class="string">r'\d+'</span>, <span class="string">'1one1two2three3four4'</span>)</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰åˆ†ç»„</span></span><br><span class="line">r = re.findall(<span class="string">r'\d+(..)'</span>, <span class="string">'1one1two2three3four4'</span>)</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>]</span><br><span class="line">[<span class="string">'on'</span>, <span class="string">'tw'</span>, <span class="string">'th'</span>, <span class="string">'fo'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="finditer"><a href="#finditer" class="headerlink" title="finditer"></a>finditer</h2><p>æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å›</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span></span><br><span class="line"></span><br><span class="line">r = re.finditer(<span class="string">r'\d+'</span>, <span class="string">'1one1two2three3four4'</span>)</span><br><span class="line">print(r)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> r:</span><br><span class="line">    print(i.span(), i.group(), i.groupdict())</span><br><span class="line">    </span><br><span class="line">------------</span><br><span class="line">&lt;callable_iterator object at <span class="number">0x101178748</span>&gt;</span><br><span class="line">(<span class="number">0</span>, <span class="number">1</span>) <span class="number">1</span> &#123;&#125;</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>) <span class="number">1</span> &#123;&#125;</span><br><span class="line">(<span class="number">8</span>, <span class="number">9</span>) <span class="number">2</span> &#123;&#125;</span><br><span class="line">(<span class="number">14</span>, <span class="number">15</span>) <span class="number">3</span> &#123;&#125;</span><br><span class="line">(<span class="number">19</span>, <span class="number">20</span>) <span class="number">4</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="sub"><a href="#sub" class="headerlink" title="sub"></a>sub</h2><p>subï¼Œæ›¿æ¢åŒ¹é…æˆåŠŸçš„æŒ‡å®šä½ç½®å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub</span><span class="params">(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Return the string obtained by replacing the leftmost</span></span><br><span class="line"><span class="string">    non-overlapping occurrences of the pattern in string by the</span></span><br><span class="line"><span class="string">    replacement repl.  repl can be either a string or a callable;</span></span><br><span class="line"><span class="string">    if a string, backslash escapes in it are processed.  If it is</span></span><br><span class="line"><span class="string">    a callable, it's passed the match object and must return</span></span><br><span class="line"><span class="string">    a replacement string to be used."""</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags).sub(repl, string, count)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°</strong></p>
<ul>
<li>patternï¼š æ­£åˆ™æ¨¡å‹</li>
<li>repl   ï¼š è¦æ›¿æ¢çš„å­—ç¬¦ä¸²æˆ–å¯æ‰§è¡Œå¯¹è±¡</li>
<li>string ï¼š è¦åŒ¹é…çš„å­—ç¬¦ä¸²</li>
<li>count  ï¼š æŒ‡å®šåŒ¹é…ä¸ªæ•°</li>
<li>flags  ï¼š åŒ¹é…æ¨¡å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸åˆ†ç»„æ— å…³</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">r = re.sub(<span class="string">"a\w+"</span>, <span class="string">"18"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">2</span>)</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">hello ps bcd ps lge ps <span class="number">18</span> <span class="number">25</span></span><br></pre></td></tr></table></figure>


<h2 id="split"><a href="#split" class="headerlink" title="split"></a>split</h2><p>splitï¼Œæ ¹æ®æ­£åˆ™åŒ¹é…åˆ†å‰²å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">split</span><span class="params">(pattern, string, maxsplit=<span class="number">0</span>, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Split the source string by the occurrences of the pattern,</span></span><br><span class="line"><span class="string">    returning a list containing the resulting substrings.  If</span></span><br><span class="line"><span class="string">    capturing parentheses are used in pattern, then the text of all</span></span><br><span class="line"><span class="string">    groups in the pattern are also returned as part of the resulting</span></span><br><span class="line"><span class="string">    list.  If maxsplit is nonzero, at most maxsplit splits occur,</span></span><br><span class="line"><span class="string">    and the remainder of the string is returned as the final element</span></span><br><span class="line"><span class="string">    of the list."""</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags).split(string, maxsplit)</span><br></pre></td></tr></table></figure>

<ul>
<li>patternï¼š æ­£åˆ™æ¨¡å‹</li>
<li>string ï¼š è¦åŒ¹é…çš„å­—ç¬¦ä¸²</li>
<li>maxsplitï¼šæŒ‡å®šåˆ†å‰²ä¸ªæ•°</li>
<li>flags  ï¼š åŒ¹é…æ¨¡å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— åˆ†ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">origin = <span class="string">"hello ps bcd ps lge ps acd 25"</span></span><br><span class="line">r = re.split(<span class="string">"ps"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">1</span>)</span><br><span class="line">print(r)</span><br><span class="line">r = re.split(<span class="string">"ps"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">2</span>)</span><br><span class="line">print(r)</span><br><span class="line">r = re.split(<span class="string">"ps"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">3</span>)</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'hello '</span>, <span class="string">' bcd ps lge ps acd 25'</span>]</span><br><span class="line">[<span class="string">'hello '</span>, <span class="string">' bcd '</span>, <span class="string">' lge ps acd 25'</span>]</span><br><span class="line">[<span class="string">'hello '</span>, <span class="string">' bcd '</span>, <span class="string">' lge '</span>, <span class="string">' acd 25'</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ‰åˆ†ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">origin = <span class="string">"hello ps bcd ps lge ps acd 25"</span></span><br><span class="line">r = re.split(<span class="string">"(ps)"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">1</span>)</span><br><span class="line">print(r)</span><br><span class="line">r = re.split(<span class="string">"p(s)"</span>, <span class="string">"hello ps bcd ps lge ps acd 25"</span>, <span class="number">1</span>)</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'hello '</span>, <span class="string">'ps'</span>, <span class="string">' bcd ps lge ps acd 25'</span>]</span><br><span class="line">[<span class="string">'hello '</span>, <span class="string">'s'</span>, <span class="string">' bcd ps lge ps acd 25'</span>]</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„å®ä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ï¼Œåˆ—è¡¨çš„é•¿åº¦=maxsplit+1ï¼ŒåŒ¹é…åˆ°çš„åˆ†å‰²å­—ç¬¦ä¸²å¹¶ä¸ä¼šè¿”å›å›æ¥ï¼›è€Œåœ¨åˆ†ç»„çš„æƒ…å†µä¸‹ï¼Œåˆ—è¡¨çš„é•¿åº¦=maxsplit+2ï¼ŒåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¹Ÿä¼šè¿”å›åˆ°åˆ—è¡¨ä¸­</p>
<h2 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h2><p>compile,ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compile</span><span class="params">(pattern, flags=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"Compile a regular expression pattern, returning a pattern object."</span></span><br><span class="line">    <span class="keyword">return</span> _compile(pattern, flags)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°</strong></p>
<ul>
<li>patternï¼š æ­£åˆ™æ¨¡å‹</li>
<li>flags  ï¼š åŒ¹é…æ¨¡å¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">p = re.compile(<span class="string">r'\d+(...)'</span>)</span><br><span class="line">print(p.findall(<span class="string">'123one134two256three378four469'</span>))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'thr'</span>, <span class="string">'fou'</span>]</span><br></pre></td></tr></table></figure>

<p>å…ˆæŠŠæ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘å†åŒ¹é…ï¼Œåœ¨éå†åŒ¹é…å¤§å‹æ–‡ä»¶æ—¶ï¼Œæ•ˆç‡ä¼šæé«˜å¾ˆå¤šï¼Œå…å»äº†æ¯æ¬¡è¿˜è¦ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼</p>
<h1 id="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼</h1><ul>
<li>IPï¼š<code>^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}$</code></li>
<li>æ‰‹æœºå·ï¼š<code>^1[3|4|5|8][0-9]\d{8}$</code></li>
<li>é‚®ç®±ï¼š<code>[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+</code></li>
</ul>
<h1 id="æ­£åˆ™è¡¨è¾¾å¼è®¡ç®—å™¨å®ä¾‹"><a href="#æ­£åˆ™è¡¨è¾¾å¼è®¡ç®—å™¨å®ä¾‹" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è®¡ç®—å™¨å®ä¾‹"></a>æ­£åˆ™è¡¨è¾¾å¼è®¡ç®—å™¨å®ä¾‹</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># test_expression = '12+33*(11.5+22.5)*44/2+59-(2*3)+(8*5-(10/2))'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">qukuohao</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å°†è¡¨è¾¾å¼ä¸­æ‰€æœ‰æ‹¬å·ä¸­çš„å†…å®¹è®¡ç®—æˆæ•°å€¼,å»æ‰è¡¨è¾¾å¼ä¸­æ‰€æœ‰çš„æ‹¬å·</span></span><br><span class="line"><span class="string">    :param s: è®¡ç®—è¡¨è¾¾å¼[str]</span></span><br><span class="line"><span class="string">    :return: æ²¡æœ‰æ‹¬å·çš„è®¡ç®—è¡¨è¾¾å¼[str]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'('</span> <span class="keyword">in</span> s:</span><br><span class="line">            r = re.split(<span class="string">r'\(([^()]*)\)'</span>, s, <span class="number">1</span>)</span><br><span class="line">            <span class="comment"># ret = eval(r[1])</span></span><br><span class="line">            ret = cal(r[<span class="number">1</span>])</span><br><span class="line">            s = r[<span class="number">0</span>] + str(ret) + r[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fuhao</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å¤„ç†ç¬¦å·çš„é—®é¢˜</span></span><br><span class="line"><span class="string">    :param s: è®¡ç®—è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">    :return: è®¡ç®—è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    ss = s.replace(<span class="string">'+-'</span>, <span class="string">'-'</span>)</span><br><span class="line">    sss = ss.replace(<span class="string">'--'</span>, <span class="string">'+'</span>)</span><br><span class="line">    <span class="keyword">return</span> sss</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chengshufajisuan</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    ä¸“é—¨ç”¨æ¥è®¡ç®—ä¸å¸¦æ‹¬å·çš„è®¡ç®—è¡¨è¾¾å¼ä¸­çš„ä¹˜é™¤æ³•</span></span><br><span class="line"><span class="string">    :param s: ä¸å¸¦æ‹¬å·çš„è®¡ç®—è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">    :return: åªæœ‰åŠ å‡æ³•çš„è®¡ç®—è¡¨è¾¾å¼(å¦‚æœä¸å†æœ‰åŠ å‡æ³•,ç›´æ¥è¿”å›è®¡ç®—ç»“æœ)</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'*'</span> <span class="keyword">in</span> s <span class="keyword">or</span> <span class="string">'/'</span> <span class="keyword">in</span> s:</span><br><span class="line">            r = re.split(<span class="string">r'(\d+\.?\d*[*|/]-?\d+\.?\d*)'</span>, s, <span class="number">1</span>)</span><br><span class="line">            ss = eval(r[<span class="number">1</span>])</span><br><span class="line">            s = r[<span class="number">0</span>] + str(ss) + r[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jiajianfajisuan</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    ä¸“é—¨ç”¨æ¥è®¡ç®—ä¸å¸¦æ‹¬å·çš„è®¡ç®—è¡¨ç¤ºå¼ä¸­çš„åŠ å‡æ³•</span></span><br><span class="line"><span class="string">    :param s: ä¸å¸¦æ‹¬å·ä¸”åªæœ‰åŠ å‡æ³•çš„è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">    :return: æœ€ç»ˆçš„è®¡ç®—ç»“æœ</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    s = fuhao(s)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    	<span class="comment"># 5-9çš„æƒ…å†µï¼›-5-9çš„æƒ…å†µéƒ½éœ€è¦é¢å¤–è€ƒè™‘</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'+'</span> <span class="keyword">in</span> s <span class="keyword">or</span> s.count(<span class="string">'-'</span>) &gt; <span class="number">1</span> <span class="keyword">or</span> (s.count(<span class="string">'-'</span>) == <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> s.startswith(<span class="string">'-'</span>)):</span><br><span class="line">            r = re.split(<span class="string">r'(-?\d+\.?\d*[+|-]\d+\.?\d*)'</span>, s, <span class="number">1</span>)</span><br><span class="line">            ss = eval(r[<span class="number">1</span>])</span><br><span class="line">            s = r[<span class="number">0</span>]+str(ss)+r[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cal</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    + - * / æ··åˆè¿ç®—</span></span><br><span class="line"><span class="string">    :param s:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'*'</span> <span class="keyword">in</span> s <span class="keyword">or</span> <span class="string">'/'</span> <span class="keyword">in</span> s:</span><br><span class="line">        s = chengshufajisuan(s)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'+'</span> <span class="keyword">in</span> s <span class="keyword">or</span> s.count(<span class="string">'-'</span>) &gt; <span class="number">1</span>:</span><br><span class="line">            s = jiajianfajisuan(s)</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">'+'</span> <span class="keyword">in</span> s <span class="keyword">or</span> s.count(<span class="string">'-'</span>) &gt; <span class="number">1</span> <span class="keyword">or</span> (s.count(<span class="string">'-'</span>) == <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> s.startswith(<span class="string">'-'</span>)):</span><br><span class="line">        s = jiajianfajisuan(s)</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(cal(qukuohao(test_expression)))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            e = input(<span class="string">'è¾“å…¥è®¡ç®—è¡¨è¾¾å¼&gt; '</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'('</span> <span class="keyword">in</span> e:</span><br><span class="line">                print(cal(qukuohao(e)))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(cal(e))</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        print(<span class="string">'Bye'</span>)</span><br></pre></td></tr></table></figure>

<hr>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<ul>
<li><a href="http://wiki.ubuntu.org.cn/Pythonæ­£åˆ™è¡¨è¾¾å¼æ“ä½œæŒ‡å—" target="_blank" rel="noopener">http://wiki.ubuntu.org.cn/Pythonæ­£åˆ™è¡¨è¾¾å¼æ“ä½œæŒ‡å—</a></li>
<li><a href="http://www.cnblogs.com/wupeiqi/articles/5501365.html" target="_blank" rel="noopener">http://www.cnblogs.com/wupeiqi/articles/5501365.html</a></li>
</ul>
<p>åœ¨çº¿æ­£åˆ™åŒ¹é…å·¥å…·ï¼š</p>
<ul>
<li><a href="http://tool.chinaz.com/regex?jdfwkey=6iptw" target="_blank" rel="noopener">http://tool.chinaz.com/regex?jdfwkey=6iptw</a></li>
</ul>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/16/Python%E5%8F%8D%E5%B0%84%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/16/Python%E5%8F%8D%E5%B0%84%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Pythonåå°„è¯¦è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-16 02:03:20" itemprop="dateCreated datePublished" datetime="2016-06-16T02:03:20+08:00">2016-06-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/16/Python%E5%8F%8D%E5%B0%84%E8%AF%A6%E8%A7%A3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/16/Pythonåå°„è¯¦è§£/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>åå°„ï¼Œå¯ä»¥ç†è§£ä¸ºåˆ©ç”¨å­—ç¬¦ä¸²çš„å½¢å¼å»å¯¹è±¡ä¸­æ“ä½œæˆå‘˜å±æ€§å’Œæ–¹æ³•</p>
<p>åå°„çš„è¿™ç‚¹ç‰¹æ€§è®©æˆ‘è”æƒ³åˆ°äº†<code>exec</code>å‡½æ•°ï¼Œä¹Ÿæ˜¯æŠŠåˆ©ç”¨å­—ç¬¦ä¸²çš„å½¢å¼å»è®©Pythonè§£é‡Šå™¨å»æ‰§è¡Œå‘½ä»¤</p>
<p>Python Version: 3.5+</p>
</blockquote>
<p>è§£é‡ŠPythonçš„åå°„ï¼Œå…ˆæä¸€ä¸ªç®€å•çš„éœ€æ±‚ï¼Œç°åœ¨æˆ‘æœ‰ä¸€ä¸ªç®€æ˜“çš„ç½‘ç«™ï¼Œç”±ä¸¤ä¸ªæ–‡ä»¶ç»„æˆï¼Œä¸€ä¸ªæ˜¯å…·ä½“æ‰§è¡Œæ“ä½œçš„<code>commons.py</code>æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯å…¥å£æ–‡ä»¶<code>index.py</code>ï¼Œç°åœ¨æˆ‘éœ€è¦åœ¨å…¥å£æ–‡ä»¶ä¸­è®¾ç½®ï¼Œè®©ç”¨æˆ·è¾“å…¥urlï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥çš„urlå»åç«¯æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># commons.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'ç™»å½•é¡µé¢!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logout</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'é€€å‡ºé¡µé¢!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'ä¸»é¡µé¢'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index.py</span></span><br><span class="line"><span class="keyword">import</span> commons</span><br><span class="line"></span><br><span class="line">inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> inp == <span class="string">'login'</span>:</span><br><span class="line">    commons.login()</span><br><span class="line"><span class="keyword">elif</span> inp == <span class="string">'logout'</span>:</span><br><span class="line">    commons.logout()</span><br><span class="line"><span class="keyword">elif</span> inp == <span class="string">'index'</span>:</span><br><span class="line">    commons.index()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">url &gt; login</span><br><span class="line">ç™»å½•é¡µé¢!</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æˆ‘ä½¿ç”¨äº†ifåˆ¤æ–­ï¼Œæ ¹æ®æ¯ä¸€ä¸ªurlè¯·æ±‚å»åç«¯æ‰§è¡ŒæŒ‡å®šçš„å‡½æ•°ã€‚é‚£ç°åœ¨æˆ‘çš„ç½‘ç«™å†…å®¹å˜å¤šäº†ï¼Œåœ¨<code>commons.py</code>ä¸­æœ‰100ä¸ªé¡µé¢æ“ä½œï¼Œé‚£ä¹ˆç›¸å¯¹åº”çš„æˆ‘åœ¨<code>index.py</code>ä¸­ä¹Ÿè¦ä½¿ç”¨if else å¯¹è¿™100ä¸ªé¡µé¢å‡½æ•°è¿›è¡Œæ‰‹åŠ¨æŒ‡å®šã€‚</p>
<p>æœ‰äº†PythonğŸåå°„çš„ç‰¹æ€§ï¼Œè¿™ä¸ªéœ€æ±‚å°±å˜å¾—å¼‚å¸¸ç®€å•äº†ï¼Œå…ˆä¸å¤šè§£é‡Šï¼Œå…ˆçœ‹ä»£ç (commons.pyä¿æŒæ–‡ä»¶ä¸å˜ï¼Œè¿˜æ˜¯æ‹¿ä¸‰ä¸ªé¡µé¢çš„æ“ä½œä¸¾ä¾‹ğŸŒ°)ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index.py</span></span><br><span class="line"><span class="keyword">import</span> commons</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    <span class="keyword">if</span> hasattr(commons, inp):</span><br><span class="line">        func = getattr(commons, inp)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br><span class="line">    </span><br><span class="line">------------</span><br><span class="line">url &gt; logout</span><br><span class="line">é€€å‡ºé¡µé¢!</span><br></pre></td></tr></table></figure>

<p>Look! Pythonçš„åå°„ç«‹äº†å¤§åŠŸï¼Œä½¿ç”¨è¿™å‡ è¡Œä»£ç ï¼Œå¯ä»¥åº”å¯¹<code>commons.py</code>æ–‡ä»¶ä¸­ä»»æ„å¤šä¸ªé¡µé¢å‡½æ•°çš„è°ƒç”¨ï¼æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦ç»†ä»‹ç»Pythonåå°„ä¸­ç”¨åˆ°çš„å†…å»ºå‡½æ•°</p>
<h1 id="getattr"><a href="#getattr" class="headerlink" title="getattr()"></a>getattr()</h1><p>å…ˆçœ‹ä¸‹æºç ä¸­çš„è§£é‡Š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getattr</span><span class="params">(object, name, default=None)</span>:</span> <span class="comment"># known special case of getattr</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    getattr(object, name[, default]) -&gt; value</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Get a named attribute from an object; getattr(x, 'y') is equivalent to x.y.</span></span><br><span class="line"><span class="string">    When a default argument is given, it is returned when the attribute doesn't</span></span><br><span class="line"><span class="string">    exist; without it, an exception is raised in that case.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><code>getattr()</code>å‡½æ•°æ‰§è¡ŒæˆåŠŸåä¼šå°†å‚æ•°ä¸­å¯¹è±¡ä¸­çš„æ–¹æ³•èµ‹å€¼ç»™æ–°çš„å˜é‡ï¼ˆä¼šè¿”å›å‚æ•°ä¸­æŒ‡å®šçš„å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼‰ç›¸å½“äºå‚æ•°ä¸­çš„æ–¹æ³•åˆå¤šäº†ä¸€ä¸ªæ ˆåŒºçš„å˜é‡å»å¼•ç”¨</p>
<p><code>getattr()</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æ˜¯ä¸ªå¯¹è±¡ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘å¯¼å…¥äº†è‡ªå®šä¹‰çš„commonsæ¨¡å—ï¼Œcommonså°±æ˜¯ä¸ªå¯¹è±¡ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šå‰é¢å¯¹è±¡ä¸­çš„ä¸€ä¸ªæ–¹æ³•åç§°ã€‚<code>getattr(x, &#39;y&#39;)</code> ç­‰ä»·äºæ‰§è¡Œäº† <code>x.y</code>ã€‚å‡å¦‚ç¬¬äºŒä¸ªå‚æ•°è¾“å…¥äº†å‰é¢å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œè¯¥å‡½æ•°ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶é€€å‡ºã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œä¸ºäº†ç¨‹åºçš„å¥å£®æ€§ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ¤æ–­ä¸€ä¸‹è¯¥å¯¹è±¡ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œäºæ˜¯<code>hasattr()</code>å‡½æ•°ç™»åœºäº†~~</p>
<h1 id="hasattr"><a href="#hasattr" class="headerlink" title="hasattr()"></a>hasattr()</h1><p>è¿˜æ˜¯å…ˆçœ‹ä¸‹æºç çš„è§£é‡Š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hasattr</span><span class="params">(*args, **kwargs)</span>:</span> <span class="comment"># real signature unknown</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Return whether the object has an attribute with the given name.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    This is done by calling getattr(obj, name) and catching AttributeError.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><code>hasattr()</code>å‡½æ•°è¿”å›å¯¹è±¡æ˜¯å¦æ‹¥æœ‰æŒ‡å®šåç§°çš„å±æ€§ï¼Œç®€å•çš„è¯´å°±æ˜¯æ£€æŸ¥åœ¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å¯¹è±¡ä¸­ï¼Œèƒ½å¦æ‰¾åˆ°ä¸ç¬¬äºŒå‚æ•°åç›¸åŒçš„æ–¹æ³•ã€‚æºç çš„è§£é‡Šè¿˜è¯´ï¼Œè¯¥å‡½æ•°çš„å®ç°å…¶å®å°±æ˜¯è°ƒç”¨äº†<code>getattr()</code>å‡½æ•°ï¼Œåªä¸è¿‡å®ƒæ•è·äº†å¼‚å¸¸è€Œå·²ã€‚æ‰€ä»¥é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå»åˆ¤æ–­å¯¹è±¡ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæœ‰åˆ™ä½¿ç”¨<code>getattr()</code>æ¥è·å–è¯¥æ–¹æ³•ã€‚</p>
<h1 id="delattr"><a href="#delattr" class="headerlink" title="delattr()"></a>delattr()</h1><p>åˆ é™¤æŒ‡å®šå¯¹è±¡ä¸­çš„æŒ‡å®šæ–¹æ³•ï¼Œç‰¹åˆ«æç¤ºï¼šåªæ˜¯åœ¨æœ¬æ¬¡è¿è¡Œç¨‹åºçš„å†…å­˜ä¸­å°†è¯¥æ–¹æ³•åˆ é™¤ï¼Œå¹¶æ²¡æœ‰å½±å“åˆ°æ–‡ä»¶çš„å†…å®¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> commons</span><br><span class="line"></span><br><span class="line">print(dir(commons))</span><br><span class="line">delattr(commons, <span class="string">'index'</span>)</span><br><span class="line">print(dir(commons))</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">[<span class="string">'__builtins__'</span>, <span class="string">'__cached__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__file__'</span>, <span class="string">'__loader__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'__spec__'</span>, <span class="string">'index'</span>, <span class="string">'login'</span>, <span class="string">'logout'</span>]</span><br><span class="line">[<span class="string">'__builtins__'</span>, <span class="string">'__cached__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__file__'</span>, <span class="string">'__loader__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'__spec__'</span>, <span class="string">'login'</span>, <span class="string">'logout'</span>]</span><br></pre></td></tr></table></figure>

<h1 id="setattr"><a href="#setattr" class="headerlink" title="setattr()"></a>setattr()</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setattr</span><span class="params">(x, y, v)</span>:</span> <span class="comment"># real signature unknown; restored from __doc__</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Sets the named attribute on the given object to the specified value.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    setattr(x, 'y', v) is equivalent to ``x.y = v''</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><code>setattr()</code>å‡½æ•°ç”¨æ¥ç»™æŒ‡å®šå¯¹è±¡ä¸­çš„æ–¹æ³•é‡æ–°èµ‹å€¼ï¼ˆå°†æ–°çš„å‡½æ•°ä½“/æ–¹æ³•ä½“èµ‹å€¼ç»™æŒ‡å®šçš„å¯¹è±¡åï¼‰ä»…åœ¨æœ¬æ¬¡ç¨‹åºè¿è¡Œçš„å†…å­˜ä¸­ç”Ÿæ•ˆã€‚<code>setattr(x, &#39;y&#39;, v)</code> ç­‰ä»·äº <code>x.y = v</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> commons</span><br><span class="line"></span><br><span class="line">commons.index()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">newindex</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'new ä¸»é¡µé¢!'</span>)</span><br><span class="line"></span><br><span class="line">setattr(commons, <span class="string">'index'</span>, newindex)</span><br><span class="line"></span><br><span class="line">commons.index()</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">ä¸»é¡µé¢</span><br><span class="line">new ä¸»é¡µé¢!</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="import"><a href="#import" class="headerlink" title="__import__"></a>__import__</h1><p>å¥½çš„ï¼Œç½‘ç«™å‘å±•è‡³ä»Šï¼ŒåŠŸèƒ½æœ‰äº†å¾ˆå¤šçš„æ‰©å±•ï¼Œç°åœ¨ä¸€ä¸ªåå°æ–‡ä»¶å·²ç»ä¸èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ ¹æ®èŒèƒ½åˆ’åˆ†åå°æ–‡ä»¶ï¼Œç°åœ¨æˆ‘åˆæ–°å¢äº†ä¸€ä¸ª<code>account.py</code>è¿™ä¸ªç”¨æˆ·ç®¡ç†ç±»çš„æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦å¯¼å…¥åˆ°é¦–é¡µä»¥å¤‡è°ƒç”¨ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘çš„é¦–é¡µé€šè¿‡åå°„ï¼Œåªèƒ½æŒ‡å®š<code>commons</code>æ¨¡å—çš„æ–¹æ³•ä»»æ„è°ƒç”¨ï¼Œç°åœ¨æ–°å¢äº†<code>account</code>æ¨¡å—ï¼Œæ˜¯ä¸æ˜¯æˆ‘åˆè¦åŠ å…¥ifå»åˆ¤æ–­å•¦ï¼Ÿä¸ç”¨ï¼Pythonå·²ç»å¸®æˆ‘ä»¬æƒ³åˆ°è¿™ä¸€ç‚¹äº†ï¼æœ€åæ¬å‡º<code>__import__</code>è¿™ä¸ªå¤§æ•‘æ˜Ÿã€‚</p>
<p>ç”±äºæ¨¡å—çš„å¯¼å…¥ä¹Ÿéœ€è¦ä½¿ç”¨Pythonåå°„çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æ¨¡å—åä¹Ÿè¦åŠ å…¥åˆ°urlä¸­ï¼Œæ‰€ä»¥ç°åœ¨urlè¯·æ±‚å˜æˆäº†ç±»ä¼¼äº<code>commons/index</code>çš„å½¢å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># account.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_user</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'æ·»åŠ ç”¨æˆ·'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_user</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'åˆ é™¤ç”¨æˆ·'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># commons.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'ç™»å½•é¡µé¢!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logout</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'é€€å‡ºé¡µé¢!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'ä¸»é¡µé¢'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">    obj_module = __import__(m)</span><br><span class="line">    <span class="keyword">if</span> hasattr(obj_module, f):</span><br><span class="line">        func = getattr(obj_module, f)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"># python3 index.py</span></span><br><span class="line">url &gt; account/add_user</span><br><span class="line">æ·»åŠ ç”¨æˆ·</span><br><span class="line"></span><br><span class="line"><span class="comment"># python3 index.py</span></span><br><span class="line">url &gt; commons/login</span><br><span class="line">ç™»å½•é¡µé¢!</span><br></pre></td></tr></table></figure>

<p>èƒ½ä½“ä¼šåˆ°<code>__import__</code>çš„ä½œç”¨äº†å—ï¼Œå°±æ˜¯æŠŠå­—ç¬¦ä¸²å½“åšæ¨¡å—å»å¯¼å…¥ã€‚<code>import &#39;sys&#39;</code> å’Œ <code>import sys</code> æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸ä¿¡ä½ æ‰§è¡Œä¸€ä¸‹~~è¦æƒ³å¯¼å…¥å­—ç¬¦ä¸²<code>&#39;sys&#39;</code>åªèƒ½é€šè¿‡<code>__import__(&#39;sys&#39;)</code>çš„æ–¹å¼å¯¼å…¥</p>
<p>ç­‰ç­‰ï¼Œè¿˜æ²¡å®Œï¼Œæˆ‘çš„ç½‘ç«™è¿›ä¸€æ­¥ç»†åŒ–åˆ†å·¥ï¼Œç°åœ¨åˆå¤šäº†ä¸€å±‚ç›®å½•ç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|- index.py</span><br><span class="line">|- commons.py</span><br><span class="line">|- account.py</span><br><span class="line">|- lib</span><br><span class="line">	|- __init__.py</span><br><span class="line">	|- connectdb.py</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘æƒ³åœ¨<code>index</code>é¡µé¢ä¸­è°ƒç”¨<code>lib</code>åŒ…ä¸‹<code>connectdb</code>æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œè¿˜æ˜¯ç”¨ä¹‹å‰çš„æ–¹å¼è°ƒç”¨å¯ä»¥å—ï¼Ÿæˆ‘ä»¬è¯•ä¸€ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">    obj_module = __import__(<span class="string">'lib.'</span> + m)</span><br><span class="line">    <span class="keyword">if</span> hasattr(obj_module, f):</span><br><span class="line">        func = getattr(obj_module, f)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br><span class="line">    </span><br><span class="line">------------</span><br><span class="line"><span class="number">404</span></span><br></pre></td></tr></table></figure>

<p>å“å‘¦ï¼Œä¸è¡Œå•Šã€‚ä¸Šé¢æˆ‘ä¸ºäº†æµ‹è¯•è°ƒç”¨libä¸‹çš„æ¨¡å—ï¼ŒæŠ›å¼ƒäº†å¯¹æ‰€æœ‰åŒçº§ç›®å½•æ¨¡å—çš„æ”¯æŒï¼Œå¯è¿˜æ˜¯ä¸è¡Œï¼Œå±…ç„¶æ‰¾ä¸åˆ°è¿™ä¸ªè¿™ä¸ªæ¨¡å—çš„è¿™ä¸ªæ–¹æ³•ã€‚è¿˜æ˜¯æ¥çœ‹ä¸‹æºç æ˜¯æ€ä¹ˆè¯´çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__import__</span><span class="params">(name, globals=None, locals=None, fromlist=<span class="params">()</span>, level=<span class="number">0</span>)</span>:</span> <span class="comment"># real signature unknown; restored from __doc__</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    __import__(name, globals=None, locals=None, fromlist=(), level=0) -&gt; module</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Import a module. Because this function is meant for use by the Python</span></span><br><span class="line"><span class="string">    interpreter and not for general use it is better to use</span></span><br><span class="line"><span class="string">    importlib.import_module() to programmatically import a module.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    The globals argument is only used to determine the context;</span></span><br><span class="line"><span class="string">    they are not modified.  The locals argument is unused.  The fromlist</span></span><br><span class="line"><span class="string">    should be a list of names to emulate ``from name import ...'', or an</span></span><br><span class="line"><span class="string">    empty list to emulate ``import name''.</span></span><br><span class="line"><span class="string">    When importing a module from a package, note that __import__('A.B', ...)</span></span><br><span class="line"><span class="string">    returns package A when fromlist is empty, but its submodule B when</span></span><br><span class="line"><span class="string">    fromlist is not empty.  Level is used to determine whether to perform </span></span><br><span class="line"><span class="string">    absolute or relative imports. 0 is absolute while a positive number</span></span><br><span class="line"><span class="string">    is the number of parent directories to search relative to the current module.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><code>__import__</code>å‡½æ•°ä¸­æœ‰ä¸€ä¸ª<code>fromlist</code>å‚æ•°ï¼Œæºç è§£é‡Šè¯´ï¼Œå¦‚æœåœ¨ä¸€ä¸ªåŒ…ä¸­å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªå‚æ•°å¦‚æœä¸ºç©ºï¼Œåˆ™returnè¿™ä¸ªåŒ…å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›åŒ…ä¸‹é¢æŒ‡å®šçš„æ¨¡å—å¯¹è±¡ï¼Œäºæ˜¯åšå‡ºå¦‚ä¸‹ä¿®æ”¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">    obj_module = __import__(<span class="string">'lib.'</span> + m, fromlist=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> hasattr(obj_module, f):</span><br><span class="line">        func = getattr(obj_module, f)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">url &gt; connectdb/mysql</span><br><span class="line">å·²è¿æ¥mysql</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸäº†~~ ä½†æ˜¯ä¸ºäº†è¿™æ¬¡æˆåŠŸï¼Œæˆ‘å†™æ­»äº†libå‰ç¼€ï¼Œç›¸å½“äºæŠ›å¼ƒäº†commonså’Œaccountä¸¤ä¸ªå¯¼å…¥çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä»¥ä¸Šä»£ç å¹¶ä¸å®Œå–„ï¼Œéœ€æ±‚å¤æ‚åï¼Œè¿˜æ˜¯éœ€è¦å¯¹è¯·æ±‚çš„urlåšä¸€ä¸‹åˆ¤æ–­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    <span class="keyword">if</span> len(inp.split(<span class="string">'/'</span>)) == <span class="number">2</span>:</span><br><span class="line">        m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">        obj_module = __import__(m)</span><br><span class="line">        <span class="keyword">if</span> hasattr(obj_module, f):</span><br><span class="line">            func = getattr(obj_module, f)</span><br><span class="line">            func()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'404'</span>)</span><br><span class="line">    <span class="keyword">elif</span> len(inp.split(<span class="string">'/'</span>)) == <span class="number">3</span>:</span><br><span class="line">        p, m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">        obj_module = __import__(p + <span class="string">'.'</span> + m, fromlist=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">if</span> hasattr(obj_module, f):</span><br><span class="line">            func = getattr(obj_module, f)</span><br><span class="line">            func()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"># python3 index.py</span></span><br><span class="line">url &gt; lib/connectdb/mysql</span><br><span class="line">å·²è¿æ¥mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># python3 index.py</span></span><br><span class="line">url &gt; account/del_user</span><br><span class="line">åˆ é™¤ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶é‡å¤ä»£ç é‡ä¸é«˜ï¼Œä½†æˆ‘ä»¬ä»è¦æœ‰ä¸€é¢—æ¶ˆé™¤é‡å¤ä»£ç çš„â¤ï¸</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(inp.split(<span class="string">'/'</span>)) == <span class="number">2</span>:</span><br><span class="line">        m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">        obj_module = __import__(m)</span><br><span class="line">        getf(obj_module, f)</span><br><span class="line">    <span class="keyword">elif</span> len(inp.split(<span class="string">'/'</span>)) == <span class="number">3</span>:</span><br><span class="line">        p, m, f = inp.split(<span class="string">'/'</span>)</span><br><span class="line">        obj_module = __import__(p + <span class="string">'.'</span> + m, fromlist=<span class="literal">True</span>)</span><br><span class="line">        getf(obj_module, f)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getf</span><span class="params">(m, f)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> hasattr(m, f):</span><br><span class="line">        func = getattr(m, f)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'404'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    inp = input(<span class="string">'url &gt; '</span>)</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/15/Python%E5%8A%A0%E5%AF%86%E6%A8%A1%E5%9D%97hashlibx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/15/Python%E5%8A%A0%E5%AF%86%E6%A8%A1%E5%9D%97hashlibx/" class="post-title-link" itemprop="url">PythonåŠ å¯†æ¨¡å—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-15 22:28:02" itemprop="dateCreated datePublished" datetime="2016-06-15T22:28:02+08:00">2016-06-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/15/Python%E5%8A%A0%E5%AF%86%E6%A8%A1%E5%9D%97hashlibx/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/15/PythonåŠ å¯†æ¨¡å—hashlibx/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Pythonä¸­çš„hashlibå’ŒhmacåŠ å¯†æ¨¡å—éƒ½æ˜¯å†…ç½®æ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå­—ç¬¦ä¸²åŠ å¯†ï¼Œè¿™äº›åŠ å¯†éƒ½æ˜¯å•å‘çš„ï¼ŒåŠ å¯†åçš„å­—ç¬¦ä¸²ä¸å¯åè§£æˆåŸå­—ç¬¦ä¸²ã€‚ä½†æ˜¯ç”±äºæŸä¸ªå›ºå®šçš„å­—ç¬¦ä¸²ä½¿ç”¨æŸä¸ªå›ºå®šçš„ç®—æ³•å¾—å‡ºçš„åŠ å¯†ä¸²æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æœ‰é€šè¿‡æ’åº“æ¥åè§£å‡ºå¯†ç çš„å±é™©</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="hashlibæ¨¡å—"><a href="#hashlibæ¨¡å—" class="headerlink" title="hashlibæ¨¡å—"></a>hashlibæ¨¡å—</h1><h2 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h2><p>hashlibæ¨¡å—ç”¨äºåŠ å¯†ç›¸å…³çš„æ“ä½œï¼Œä»£æ›¿äº†md5æ¨¡å—å’Œshaæ¨¡å—ï¼Œä¸»è¦æä¾› SHA1, SHA224, SHA256, SHA384, SHA512 ï¼ŒMD5 ç®—æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># md5</span></span><br><span class="line"><span class="comment"># åˆ›å»ºmd5å¯¹è±¡</span></span><br><span class="line">hash = hashlib.md5()</span><br><span class="line"><span class="comment"># updateæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ç±»å‹çš„æ•°æ®æ˜¯Python3+ä¸­çš„å¼ºåˆ¶è¦æ±‚</span></span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²</span></span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²</span></span><br><span class="line">print(hash.digest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">72</span>c5c8f4fcfeb39c1ebce3be56ebb9f8</span><br><span class="line"><span class="string">b'r\xc5\xc8\xf4\xfc\xfe\xb3\x9c\x1e\xbc\xe3\xbeV\xeb\xb9\xf8'</span></span><br></pre></td></tr></table></figure>

<h2 id="sha1"><a href="#sha1" class="headerlink" title="sha1"></a>sha1</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># sha1</span></span><br><span class="line"><span class="comment"># åˆ›å»ºsha1å¯¹è±¡</span></span><br><span class="line">hash = hashlib.sha1()</span><br><span class="line"><span class="comment"># æŒ‰ç…§æŒ‡å®šçš„å­—ç¬¦ç¼–ç åŠ å¯†å­—ç¬¦ä¸²</span></span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">299</span>a06d4672c5a57facee0cf132593132084a3c0</span><br></pre></td></tr></table></figure>

<h2 id="sha256"><a href="#sha256" class="headerlink" title="sha256"></a>sha256</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># sha256</span></span><br><span class="line">hash = hashlib.sha256()</span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">f379eefa6d3a0447d807d679dbd02f0593e8b3c3377da53dd909d98b4dcac9ad</span><br></pre></td></tr></table></figure>

<h2 id="sha384"><a href="#sha384" class="headerlink" title="sha384"></a>sha384</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># sha384</span></span><br><span class="line">hash = hashlib.sha384()</span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">768e16</span>e89a691905e7e2413fc67ba2846a39a3d2dd064a7930eb54c36e58a2694b5bf57ca7bb52cea0ad33feaf718ad6</span><br></pre></td></tr></table></figure>

<h2 id="sha512"><a href="#sha512" class="headerlink" title="sha512"></a>sha512</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># sha512</span></span><br><span class="line">hash = hashlib.sha512()</span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">ef510ae0c752261359b87e8260b1a8d90a1d9bc373fd5a107e091e9340d60877909b1e7996c32ecb5a571378815aa524e284a65d7d91d33b8fe29f1376ff048e</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="è‡ªå®šä¹‰keyåŠ å¯†"><a href="#è‡ªå®šä¹‰keyåŠ å¯†" class="headerlink" title="è‡ªå®šä¹‰keyåŠ å¯†"></a>è‡ªå®šä¹‰keyåŠ å¯†</h2><p>ä¸Šé¢çš„åŠ å¯†ç®—æ³•è™½ç„¶å·²ç»è¶³å¤Ÿå¼ºå¤§ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨ç¼ºé™·ï¼Œå³å¯ä»¥é€šè¿‡æ’åº“åè§£å¯†ç ã€‚æ‰€ä»¥ï¼Œæœ‰å¿…è¦å¯¹åŠ å¯†ç®—æ³•ä¸­æ·»åŠ è‡ªå®šä¹‰keyå†æ¥åšåŠ å¯†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># md5</span></span><br><span class="line">hash = hashlib.md5(bytes(<span class="string">'9ol4rfv'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line">hash.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">'utf8'</span>))</span><br><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²</span></span><br><span class="line">print(hash.hexdigest()</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">6e4257</span>d3855aaf563ce5c8d499156137</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="hmacæ¨¡å—"><a href="#hmacæ¨¡å—" class="headerlink" title="hmacæ¨¡å—"></a>hmacæ¨¡å—</h1><p>hmac æ¨¡å—ï¼Œå®ƒå†…éƒ¨å¯¹æˆ‘ä»¬åˆ›å»º key å’Œ å†…å®¹ è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ç„¶åå†åŠ å¯†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"></span><br><span class="line">h = hmac.new(bytes(<span class="string">'9ol4rfv'</span>, encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">h.update(bytes(<span class="string">'polarsnow'</span>, encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">print(h.hexdigest())</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"><span class="number">2</span>d7acf84247e563213d0ec8e325831ba</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://docs.lvrui.io/2016/06/15/Python%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="æåœ°ç‘é›ª">
      <meta itemprop="description" content="æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Polar Snow Documentation">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/15/Python%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">Pythonç³»ç»Ÿæ¨¡å—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-06-15 21:38:40" itemprop="dateCreated datePublished" datetime="2016-06-15T21:38:40+08:00">2016-06-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2016/06/15/Python%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/15/Pythonç³»ç»Ÿæ¨¡å—/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Pythonä¸‹æœ‰ä¸¤ä¸ªç³»ç»Ÿæ¨¡å—<code>sys</code> <code>os</code>ï¼Œ<code>sys</code>æ¨¡å—ç”¨äºæä¾›å¯¹Pythonè§£é‡Šå™¨ç›¸å…³çš„æ“ä½œï¼›<code>os</code>æ¨¡å—ç”¨äºæä¾›ç³»ç»Ÿçº§åˆ«çš„æ“ä½œ</p>
<p>Python Version: 3.5+</p>
</blockquote>
<h1 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h1><p>sysæ¨¡å—ä¸­å¸¸ç”¨çš„å‡½æ•°</p>
<ul>
<li>sys.argv           å‘½ä»¤è¡Œå‚æ•°Listï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç¨‹åºæœ¬èº«è·¯å¾„</li>
<li>sys.exit(n)        é€€å‡ºç¨‹åºï¼Œæ­£å¸¸é€€å‡ºæ—¶exit(0)</li>
<li>sys.version        è·å–Pythonè§£é‡Šç¨‹åºçš„ç‰ˆæœ¬ä¿¡æ¯</li>
<li>sys.maxint         æœ€å¤§çš„Intå€¼</li>
<li>sys.path           è¿”å›æ¨¡å—çš„æœç´¢è·¯å¾„ï¼Œåˆå§‹åŒ–æ—¶ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡çš„å€¼</li>
<li>sys.platform       è¿”å›æ“ä½œç³»ç»Ÿå¹³å°åç§°</li>
<li>sys.stdin          è¾“å…¥ç›¸å…³</li>
<li>sys.stdout         è¾“å‡ºç›¸å…³</li>
<li>sys.stderror       é”™è¯¯ç›¸å…³</li>
</ul>
<h1 id="os"><a href="#os" class="headerlink" title="os"></a>os</h1><ul>
<li>os.getcwd()                 è·å–å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„</li>
<li>os.chdir(â€œdirnameâ€)         æ”¹å˜å½“å‰è„šæœ¬å·¥ä½œç›®å½•ï¼›ç›¸å½“äºshellä¸‹cd</li>
<li>os.curdir                   è¿”å›å½“å‰ç›®å½•: (â€˜.â€™)</li>
<li>os.pardir                   è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•å­—ç¬¦ä¸²åï¼š(â€˜..â€™)</li>
<li>os.makedirs(â€˜dir1/dir2â€™)    å¯ç”Ÿæˆå¤šå±‚é€’å½’ç›®å½•</li>
<li>os.removedirs(â€˜dirname1â€™)   è‹¥ç›®å½•ä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œå¹¶é€’å½’åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œå¦‚è‹¥ä¹Ÿä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œä¾æ­¤ç±»æ¨</li>
<li>os.mkdir(â€˜dirnameâ€™)         ç”Ÿæˆå•çº§ç›®å½•ï¼›ç›¸å½“äºshellä¸­mkdir dirname</li>
<li>os.rmdir(â€˜dirnameâ€™)         åˆ é™¤å•çº§ç©ºç›®å½•ï¼Œè‹¥ç›®å½•ä¸ä¸ºç©ºåˆ™æ— æ³•åˆ é™¤ï¼ŒæŠ¥é”™ï¼›ç›¸å½“äºshellä¸­rmdir dirname</li>
<li>os.listdir(â€˜dirnameâ€™)       åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼Œå¹¶ä»¥åˆ—è¡¨æ–¹å¼æ‰“å°</li>
<li>os.remove()                 åˆ é™¤ä¸€ä¸ªæ–‡ä»¶</li>
<li>os.rename(â€œoldnameâ€,â€newâ€)  é‡å‘½åæ–‡ä»¶/ç›®å½•</li>
<li>os.stat(â€˜path/filenameâ€™)    è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯</li>
<li>os.sep                      æ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦ï¼Œwinä¸‹ä¸ºâ€\â€œ,Linuxä¸‹ä¸ºâ€/â€œ</li>
<li>os.linesep                  å½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦ï¼Œwinä¸‹ä¸ºâ€\t\nâ€,Linuxä¸‹ä¸ºâ€\nâ€</li>
<li>os.pathsep                  ç”¨äºåˆ†å‰²æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²</li>
<li>os.name                     å­—ç¬¦ä¸²æŒ‡ç¤ºå½“å‰ä½¿ç”¨å¹³å°ã€‚win-&gt;â€™ntâ€™; Linux-&gt;â€™posixâ€™</li>
<li>os.system(â€œbash commandâ€)   è¿è¡Œshellå‘½ä»¤ï¼Œç›´æ¥æ˜¾ç¤º</li>
<li>os.environ                  è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡</li>
<li>os.path.abspath(path)       è¿”å›pathè§„èŒƒåŒ–çš„ç»å¯¹è·¯å¾„</li>
<li>os.path.split(path)         å°†pathåˆ†å‰²æˆç›®å½•å’Œæ–‡ä»¶åäºŒå…ƒç»„è¿”å›</li>
<li>os.path.dirname(path)       è¿”å›pathçš„ç›®å½•ã€‚å…¶å®å°±æ˜¯os.path.split(path)çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li>os.path.basename(path)      è¿”å›pathæœ€åçš„æ–‡ä»¶åã€‚å¦‚ä½•pathä»¥ï¼æˆ–\ç»“å°¾ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›ç©ºå€¼ã€‚å³os.path.split(path)çš„ç¬¬äºŒä¸ªå…ƒç´ </li>
<li>os.path.exists(path)        å¦‚æœpathå­˜åœ¨ï¼Œè¿”å›Trueï¼›å¦‚æœpathä¸å­˜åœ¨ï¼Œè¿”å›False</li>
<li>os.path.isabs(path)         å¦‚æœpathæ˜¯ç»å¯¹è·¯å¾„ï¼Œè¿”å›True</li>
<li>os.path.isfile(path)        å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œè¿”å›Trueã€‚å¦åˆ™è¿”å›False</li>
<li>os.path.isdir(path)         å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„ç›®å½•ï¼Œåˆ™è¿”å›Trueã€‚å¦åˆ™è¿”å›False</li>
<li>os.path.join(path1[, path2[, â€¦]])  å°†å¤šä¸ªè·¯å¾„ç»„åˆåè¿”å›ï¼Œç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„ä¹‹å‰çš„å‚æ•°å°†è¢«å¿½ç•¥</li>
<li>os.path.getatime(path)      è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åå­˜å–æ—¶é—´</li>
<li>os.path.getmtime(path)      è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åä¿®æ”¹æ—¶é—´</li>
</ul>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/23/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/25/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="æåœ°ç‘é›ª"
      src="/images/avatar.JPG">
  <p class="site-author-name" itemprop="name">æåœ°ç‘é›ª</p>
  <div class="site-description" itemprop="description">æåœ°ç‘é›ªçš„ä¸ªäººæŠ€æœ¯åšå®¢. "å–ä¹‹å¼€æº ç”¨ä¹‹å¼€æº", åˆ†äº«è‡ªå·±çš„ç»éªŒä¹‹è°ˆ".</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">284</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">372</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Larry0315" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Larry0315" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:polarsnow@lvrui.io" title="E-Mail â†’ mailto:polarsnow@lvrui.io" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.lvrui.io/" title="https:&#x2F;&#x2F;www.lvrui.io" rel="noopener" target="_blank">www.lvrui.io</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://20150509.cn/" title="https:&#x2F;&#x2F;20150509.cn" rel="noopener" target="_blank">20150509.cn</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">å†€ICPå¤‡15013857å·-2 </a>
  </div>

<div class="copyright">
  
  &copy; 2015 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æåœ°ç‘é›ª</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://polarsnow.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
